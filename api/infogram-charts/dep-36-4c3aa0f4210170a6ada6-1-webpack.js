(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-36"],{7760:(t,e,a)=>{a.r(e),a.d(e,{BarStacked:()=>R});var r=a(498);var n=a.n(r);var i=a(7713);var o=a(3915);var l=a(7714);var c=a(3906);var s=a(7738);var u=a(3876);var h=a(3862);var d=a(3911);var f=a(3912);var g=a(7706);var v=a(3894);var p=a(7708);var y=a(7707);var m=a(7756);var x=a(7715);var b=a(7717);var k=a(7705);var S=a(3893);var E=a(1114);var w=a(7724);var L=a(3903);var O=a(3900);var T=a(1113);var D=a(3909);var I=a(3861);var C=a(7761);var P=a(7758);function B(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,a){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(a||t):n.value}})(t,e,a||t)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,I.putGraph)("bar-stacked",C.BarStacked);var R=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(r,t);var a=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=j(r),a;if(e){var n=j(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);var i;return(i=a)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),a.apply(this,arguments)}var g,I;return I=[{key:"getClassName",value:function(){return"BarStacked"}}],g=[{key:"render",value:function(){var t=this;var e,a;this.detectDimensions();var r=this.options,n=this.root;var o=new w.Renderer({instance:this});var l=this.getSheetData();var c=(0,f.formatHelper)(l);var g=(0,p.percentEnabled)(r);var I=this.runtime={width:r.width,height:r.height,components:{},metrics:{},layout:{margin:{top:0,right:1,bottom:0,left:0},marginTitle:{left:0,right:0,top:0,bottom:0},leftLabelPadding:{top:2,right:10,bottom:2,left:0}},inanimate:(0,d.inanimated)(r),sheet:l,formatter:c,percent:g};var C=I.layout;var B=C.margin,A=C.marginTitle,j=C.leftLabelPadding;var G=C.marginAxis={left:0,right:0};var R=r.fixedHeight;var H=this.prepareSheetData(l,this.sheetIndex);this.createTickIntervals(),(0,O.Controls)(this,{width:r.width}),(0,D.DownloadButton)(this,r.style.legend);var V=(0,L.legendHelper)({instance:this});if(!this.sheetsNotFound(H)){var M=l.axis[0];var z=l.axis[1];var W=this.getCategoryData(H);var _;var U={maxLeftCategoryWidth:0,maxLeftCategoryHeight:0};var Z=this.createAnimationCounter(3);l.categories.categoryHeight&&(_=Number(l.categories.categoryHeight));var N=r.style.axis.x;var F=r.style.axis.y;this.titleLayout(["x","y"]);var X={height:0};M.ticks&&((X=(0,E.getTextDimensions)(c.axis.x.tickSample(),N.tick)).height=Math.min(X.height,30));var Y=I.width-B.left-A.left-B.right-A.right;var q=I.height-B.top-A.top-B.bottom-A.bottom;var J=(0,i.default)(0,W.length);var K=(0,s.default)().domain(J).paddingInner(.1).paddingOuter(.1);var Q=X.height+(M.ticks?5:0);if(!R&&_){var $=10;for(K.range([0,$-Q]);K.bandwidth()-_<0;)$+=1,K.range([0,$-Q]);$-=1,I.height=$+B.top+A.top+B.bottom+A.bottom,q=$}K.range([0,q-Q]);var tt=Y-G.left-G.right;var te=this.getDomain(H);"absolute"!==r.series.data||(0,L.legendFiltered)(this)||(te=this.getSheetsSeriesDomain()),I.xDomain=te;var ta=(0,k.limit)(M,te);var tr=0;var tn=I.metrics.leftCategoryWidth=0;var ti=(0,m.Left)().data([]);var to=te[0]<0;if(z.ticks){tr=j.right,to&&(tr*=2);var tl=(0,E.getTextDimensions)(W,F.tick);U.maxLeftCategoryWidth=.35*tt-j.right,U.maxLeftCategoryHeight=K.bandwidth()+.1*K.bandwidth()/.9-j.top-j.bottom;var tc=!1;if(tl.width<=U.maxLeftCategoryHeight?tn=tl.height||(0,E.getTextDimensions)([v.PRINTABLE_ASCII],F.tick).height:(Math.ceil(tn=S.Measure.wrappedText(U.maxLeftCategoryWidth,W,F.tick,tl.height).width)<=U.maxLeftCategoryWidth&&(tn=Math.ceil(tn)),tc=U.maxLeftCategoryHeight<tl.height),I.metrics.leftCategoryWidth=tn,ti.scale(K).data(W).bounds({width:tn+j.right,height:q}).offset({left:-(tn+tr),top:0}).style(F.tick).padding(j),tc){var ts=(0,y.filterOverlappingCategories)(K,tl,(0,E.getAllTextDimensions)(W,F.tick));ti.indexFilter(ts);var tu=W.filter(function(t,e){return -1!==ts.indexOf(e)});tn=S.Measure.wrappedText(U.maxLeftCategoryWidth,tu,F.tick,tl.height).width,I.metrics.leftCategoryWidth=tn=Math.ceil(tn),ti.bounds({width:tn+j.right,height:q}).offset({left:-(tn+tr),top:0})}tt-=tn+j.right+tr}var th=I.xScale=(0,u.default)().rangeRound([0,tt]).clamp(ta);th.domain(te);var td=(0,b.GridLines)().scale(K).orient(b.GridLines.ORIENTS.horizontal).tickSize(-Y).highlightZero(l.grid.horizontalZeroHighlight).style(r.style.grid);l.grid.horizontal||td.tickValues([]);var tf=I.components.xGridLines=(0,b.GridLines)().scale(th).orient(b.GridLines.ORIENTS.vertical).tickSize(q).highlightZero(l.grid.verticalZeroHighlight).style(r.style.grid);var tg=I.components.xAxisBottomText=(0,x.Axis)().scale(th).orient("bottom").style(N.tick).textOffset(-5).offset({top:q-X.height/4});C.igc={x:B.left+A.left+G.left+tn+tr,y:B.top+A.top},this.xTicksSetup(),this.gridSetupVertical(),this.titleComponents(["x","y"]);var tv=I.components,tp=tv.bottomTitle,ty=tv.leftTitle;tp.orientBounds({x1:B.left+A.left+tn+(z.ticks?j.right:0),y1:B.top,x2:I.width,y2:I.height-B.bottom-5}),ty.orientBounds({x1:B.left+4,y1:B.top+A.top,x2:I.width,y2:B.top+A.top+q}),tp.dispatch().on("animationEnd",Z),I.inanimate&&(0,d.removeAnimation)([ty,tp,tf,td,tg,ti]),this.containerSetup();var tm=n.select(".igc");var tx=r.animation.duration;o.add(function(){n.attr("width",I.width).attr("height",I.height),tm.selectAll(".igc-labels").remove(),n.transition().ease(h[r.animation.ease]).duration(tx).on("start",function(){t.events.call("startAnimation")}).on("end",function(){Z()}),tm.attr("transform","translate(".concat(C.igc.x,", ").concat(C.igc.y,")"))}),z.ticks?(o.addGrid(ti,"igc-y-axis-text"),l.grid.vertical?o.add(function(){t.createBorderLineFunc(n.select(".igc .igc-grid .igc-y-axis-text"),ti)()}):o.addGrid(function(t){t.select(".igc-y-axis-border").remove()},"igc-y-axis-text")):o.addGrid(function(t){t.selectAll(".tick").remove(),t.select(".igc-y-axis-border").remove()},"igc-y-axis-text"),o.addGrid(td,"igc-ygrid"),o.addGrid(tf,"igc-xgrid"),o.addGrid(tg,"igc-x-axis-text");var tb=r.style.graph.item.value,tk=tb.placementStrategy,tS=tb.hideOverlapping,tE=tb.align,tw=function(t,e){if(null==t)return{};var a=function(t,e){if(null==t)return{};var a={};var r=Object.keys(t);var n,i;for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);var r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(tb,["placementStrategy","hideOverlapping","align"]);var tL="no-alignment"===tk?P.labelsWithoutAlignment:P.labelsWithAlignment;o.addGraph([{graphs:H,x:th,y:K,textStyle:r.style.graph.item.value,legend:V,transitionDuration:tx,animationEnd:(null==l?void 0:null===(a=l.graphOptions)||void 0===a?void 0:null===(e=a.bar)||void 0===e?void 0:e.showValues)?function(){return tL({selection:tm,graphs:H,xScale:th,yScale:K,style:tw,formatter:c,legend:V,chartId:t.chartId,tooltip:(0,T.createStyledTooltip)(t),tooltipText:g?function(t){return t.yLabel}:function(t){return"".concat(t.yLabel,": ").concat(c.tooltip.x.format(t.xLabel))},tooltipTextValue:g?(0,p.tooltipPercentValue)({sheet:l,formatter:c,props:["groupLabel","xLabel","x"]}):function(t){return t.groupLabel},hideOverlapping:tS,align:tE}).then(Z)}:Z}]),o.addTitle(ty,"igc-title-left"),o.addTitle(tp,"igc-title-bottom"),o.start()}}},{key:"graphInstanceSetup",value:function(t,e,a,r){var n=this.runtime,i=n.formatter,o=n.percent,l=n.sheet;var c=r.graphs.length;var s=(0,d.removeDelay)(this,function(){return a/c*500});var u=function(t){return"".concat(t.yLabel,": ").concat(i.tooltip.x.format(t.xLabel))};var h=function(t){return t.groupLabel};o&&(u=function(t){return t.yLabel},h=(0,p.tooltipPercentValue)({sheet:l,formatter:i,props:["groupLabel","xLabel","x"]})),t.scaleX(r.x).scaleY(r.y).data(e.data).colors(e.colors).groupId(a).textStyle(r.textStyle).alpha(this.options.opacity).legend(r.legend).tooltip((0,T.createStyledTooltip)(this)).tooltipText(u).tooltipValue(h).transitionDelay(s).transitionDuration(r.transitionDuration)}},{key:"renderGraphInstances",value:function(){var t=this.graphInstances.enterCount;var e=this.graphInstances.updateCount;var a=e+t;var r=0===e&&t>0;var i=e>0&&t>0;var o;var l=this.graphInstances[0].group;var c=n().after(2,function(){l.animationEnd()});var s=n().after(this.graphInstances.length,c);this.graphInstances.forEach(function(t){"update"===t.type&&(o=t.instance)});var u=function(){0==--a&&c()};this.graphInstances.forEach(function(t){var e=t.instance;var a=e.dispatch();if(i&&"enter"===t.type){a.on("animationStart",u);var n=e.transitionTiming().duration;o&&(n=o.transitionTiming().duration);var l=n.x+n.y;e.renderDelay(l)}else r?a.on("animationStart",u):a.on("animationUpdateEnd",u);a.on("animationEnd",s),t.selection.call(t.instance)})}},{key:"getDomain",value:function(t){var e=[(0,o.default)(t,function(t){return(0,l.default)(t.data,function(t){return t.x<0?t.x:0})}),(0,c.default)(t,function(t){return(0,l.default)(t.data,function(t){return t.x>0?t.x:0})})];return(0,k.ensureZeroEqual)(e),(0,k.ensureZero)(e),e}},{key:"getSheetsSeriesDomain",value:function(){var t;return this.options.sheets.forEach(function(e,a){var r=n().merge({},this.emptySheetData(),e);var i=this.prepareSheetData(r,a);var o=this.getDomain(i);0===a?t=o.slice(0):(t[0]=Math.min(o[0],t[0]),t[1]=Math.max(o[1],t[1]))},this),t}},{key:"defaults",value:function(){return n().merge({},A(j(r.prototype),"defaults",this).call(this),{series:{data:"separate"},style:{graph:{item:{value:{color:{method:"contrast",contrast:{light:"#ffffff",dark:"#000000",background:"#ffffff"},manual:{fill:"#000000",stroke:void 0}},placementStrategy:"no-alignment",hideOverlapping:!0,align:"left"}}}}})}},{key:"emptySheetData",value:function(){return n().merge({},A(j(r.prototype),"emptySheetData",this).call(this),{categories:{padding:20},series:[{type:"bar-stacked"}],graphOptions:{bar:{showValues:!0}},axis:[{title:"",ticks:!0},{title:"",ticks:!0}],grid:{verticalZeroHighlight:!0,vertical:!0,horizontal:!1}})}},{key:"prepareSheetData",value:function(t,e){var a,r;var i=t.categories.colors;var o=null==t?void 0:null===(r=t.graphOptions)||void 0===r?void 0:null===(a=r.bar)||void 0===a?void 0:a.showValues;t.categories.data||(t.categories.data=[]);var l=e===this.sheetIndex;var c;l&&(c=(0,L.createLegendData)(this));var s=t.categories.data.map(function(t,e){return{colors:i,data:[],categoryIdx:e,showValues:!0===o,type:"bar-stacked"}});t.series.forEach(function(e,a){var r=n().get(e,"index",a);(!l||c({color:(0,E.getColor)(e.index,i),title:(0,E.replaceBlank)(e.title),groupId:r}).active)&&e.data.forEach(function(a,i){var o=t.categories.data[i];void 0!==o&&s[i].data.push({x:(0,E.replaceBlank)(a,null),y:i,xLabel:(0,E.replaceBlank)(e.rawData[i]),yLabel:(0,E.replaceBlank)(e.title),groupLabel:(0,E.replaceBlank)(o),seriesIdx:r,link:n().get(e,"links[".concat(i,"]"),null)})})});var u=s.length;return s.forEach(function(t){var e=t.data.length;var a=0;0!==e&&(t.data.forEach(function(t){null===t.x&&a++}),a===e&&(t.data=[]))}),(s=s.filter(function(t){return t.data&&t.data.length>0})).forEach(function(t){t.data=t.data.filter(function(t){return null!==t.x})}),s.length!==u&&s.forEach(function(t,e){t.data.forEach(function(t){t.y=e})}),(0,p.percentEnabled)(this.options)&&(0,p.adjustStackedGraphs)(s,"x"),s}}],B(r.prototype,g),I&&B(r,I),r}(g.BarClass)},7761:(t,e,a)=>{a.r(e),a.d(e,{BarStacked:()=>v});var r=a(498);var n=a.n(r);var i=a(420);var o=a(3876);var l=a(1117);var c=a(3863);var s=a(3871);var u=a(3851);var h=a(1113);var d=a(3855);var f=a(1114);var g=a(3905);function v(){var t=function(t){I.duration.x=P,0===P&&(I.duration.y=P,I.duration.text=P),t.each(function(){if(!k.length){A.call("animationStart"),A.call("animationUpdateEnd"),A.call("animationEnd");return}var t=(0,l.default)(this);var a=t.selectAll("path");a.transition().duration(0);var r=v(a);t.selectAll("text").remove(),p(r[0]),e(t,r)})};var e=function(t,e){var r=I.duration;var n=0;var i=t.selectAll("path").data(e);var o=i.enter().insert("path","text");var l=0===i.size()&&i.size()<o.size();i.exit().remove(),i.style("fill",function(t){return t.next.color}).style("stroke-width",0).style("opacity",L),l?(A.call("animationStart"),A.call("animationUpdateStart"),A.call("animationUpdateEnd"),o.call(y,function(){i=i.merge(o),A.call("animationEnterEnd"),A.call("animationEnd"),a(i),m(i)})):(A.call("animationStart"),A.call("animationUpdateStart"),i.transition().duration(r.x).attrTween("d",D(function(t){return{xPos:t.next.xPos,yPos:t.yPos,width:t.next.width,height:t.height}})).transition().duration(r.y).on("start",function(){n++}).attrTween("d",D(function(t){return t.next})).on("end",function(){if(0==--n){if(A.call("animationUpdateEnd"),0===o.size()){A.call("animationEnterStart"),A.call("animationEnterEnd"),A.call("animationEnd"),a(i),m(i);return}o.call(y,function(){A.call("animationEnterEnd"),A.call("animationEnd"),a(i=i.merge(o)),m(i)})}}))};var a=function(t){B&&B.data().forEach(function(t){B.addListener({id:"".concat(E,"_").concat(t.groupId),dispatch:A})}),A.on("highlightStart.shape",function(e){t.filter(r(e)).transition().duration(150).ease(c.linear).style("opacity",.3*L)}),A.on("highlightEnd.shape",function(e){t.filter(r(e)).transition().duration(150).ease(c.linear).style("opacity",L)})};var r=function(t){return function(e){return e.seriesIdx!==t}};var v=function(t){var e=[0,0];var a=b.bandwidth();var r=[];var i=[];return k.forEach(function(t,r){var n=i[r]={};var o=t.x;var l=+(o>0);n.x0=e[l],e[l]+=o,n.x1=e[l],n.x=t.x,n.width=x(n.x1)-x(n.x0),n.xPos=x(n.x0)+(1===l?1:0),n.xLabel=t.xLabel,n.y=t.y,n.height=a,n.yLabel=t.yLabel,n.yPos=b(t.y),n.groupLabel=t.groupLabel,n.link=t.link,n.seriesIdx=t.seriesIdx,n.color=(0,f.getColor)(t.seriesIdx,S)}),t.each(function(t){var e=n().merge({},t);r.push(e)}),0===r.length&&(r=i.map(function(t){var e=n().merge({},t);return e.width=0,e.xPos=x(0),e})),(0,f.pairData)(r,i,function(t){t.width=0}),r};var p=function(t){var e={y:["yPos","height"]};var a;var r;var n;if(t){var i=t.next;for(a in I.duration)e[a]&&(r=e[a].length,n=0,e[a].forEach(o),r===n&&(I.duration[a]=0))}function o(e){.2>Math.abs(t[e]-i[e])&&n++}};var y=function(t,e){var a=0;t.style("fill",function(t){return t.color}).style("opacity",L).style("stroke-width",0).attr("d",function(t){return T(t.xPos,t.yPos,0,t.height,0)}),t.transition().duration(P).ease(s.elasticOut).delay(function(){return R+C.apply(this,arguments)}).on("start",function(){0===a&&A.call("animationEnterStart"),a++}).attrTween("d",D(function(t){return t.next})).on("end",function(){0==--a&&e()})};var m=function(t){(0,g.addMouseEvents)(t,A,H,j,G),t.on("mousemove",function(t,e){var a=(0,f.getMousePosition)(t);var r=(0,f.getColor)(e.seriesIdx,S);var n=j(e);var i=G(e);H().setText(n).setValue(i).setPosition(a,r)})};var x=(0,o.default)();var b=(0,o.default)();var k=[];var S=f.schemeCategory10;var E;var w;var L=1;var O=(0,u.chartOptions)().style.graph.item.value;var T=d.barToRight;var D=(0,d.createTweenShape)(T,"y");var I={duration:{x:700,y:400,text:50}};var C=0;var P=700;var B;var A=(0,i.default)("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","openUrl");var j=function(t){return t.xLabel};var G=function(t){return t.yLabel};var R=0;var H=h.getTooltip;return Object.assign(t,{scaleX:function(e){return arguments.length?(x=e.copy(),t):x},scaleY:function(e){return arguments.length?(b=e.copy(),t):b},data:function(e){return arguments.length?(k=e,t):k},colors:function(e){return arguments.length?(S=e,t):S},groupId:function(e){return arguments.length?(w=e,t):w},chartId:function(e){return arguments.length?(E=e,t):E},textStyle:function(e){return arguments.length?(O=e,t):O},alpha:function(e){return arguments.length?(L=e,t):L},legend:function(e){return arguments.length?(B=e,t):B},tooltip:function(e){return arguments.length?(H=e,t):H},tooltipText:function(e){return arguments.length?(j=e,t):j},tooltipValue:function(e){return arguments.length?(G=e,t):G},transitionDelay:function(e){return arguments.length?(C=e,t):C},transitionDuration:function(e){return arguments.length?(P=e,t):P},transitionTiming:function(e){return arguments.length?(I=e,t):I},renderDelay:function(e){return arguments.length?(R=e,t):R},dispatch:function(){return A}}),t}}}]);