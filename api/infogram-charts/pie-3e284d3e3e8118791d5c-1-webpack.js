(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[56],{7768:(t,e,r)=>{r.r(e),r.d(e,{Pie:()=>P});var a=r(498);var n=r.n(a);var i=r(3862);var o=r(3807);var l=r(7706);var s=r(7769);var u=r(1114);var c=r(3894);var h=r(3912);var d=r(3903);var f=r(3900);var v=r(7724);var p=r(1113);var g=r(3909);var y=r(3861);var m=r(7770);function x(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function b(t,e,r){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(a){var n=Object.getOwnPropertyDescriptor(a,e);return n.get?n.get.call(r||t):n.value}})(t,e,r||t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,y.putGraph)("pie",m.Pie);var P=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(a,t);var r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=w(a),r;if(e){var n=w(this).constructor;r=Reflect.construct(t,arguments,n)}else r=t.apply(this,arguments);var i;return(i=r)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function a(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}var o,y;return y=[{key:"getClassName",value:function(){return"Pie"}}],o=[{key:"sheetsNotFound",value:function(t){return l.BarClass.prototype.sheetsNotFound.call(this,t[0].data)}},{key:"render",value:function(){var t,e,r;this.detectDimensions();var a=this.root,o=this.options;var l=new v.Renderer({instance:this});var u=this.getSheetData();var c=(0,h.formatHelper)(u);var p=this.runtime={width:o.width,height:o.height,sheet:u,formatter:c};var y=p.graphs=this.prepareSheetData(u);var m=y[0];var x=o.fixedHeight;var b=this.createAnimationCounter(1);(0,f.Controls)(this,{width:o.width}),(0,g.DownloadButton)(this,o.style.legend);var w=(0,d.legendHelper)({instance:this});if(!this.sheetsNotFound(y)){var S=p.width;var P={top:1,bottom:1};var A=p.height-P.top-P.bottom;!x&&A>S&&(p.height-=A-S,A=p.height);var I=Math.min(S,A)/2;var k=m.showValues?I*u.series[0].outerRadiusPct:I;var R=m.outerRadiusVaries;m.showValues&&I-k<15&&(k=I-15);var C=m.innerRadiusPercent?m.innerRadiusPercent*k:m.innerRadius;var T={width:2*C/Math.sqrt(2),height:2*C/Math.sqrt(2)};var O=(0,s.Text)().style(n().get(o,"style.graph.title",{})).value(u.categories.title).offset({left:S/2-T.width/2,top:P.top+A/2-T.height/2}).bounds({radius:C,width:T.width,height:T.height}).align("center").cssClassName("igc-pie-center-text-node").autoFontSize(!0);(0===C||!1===m.showTitle)&&O.value(""),this.radialFeature&&this.radialFeature([C,k]),this.containerSetup();var q=a.select(".igc");var M=a.select("defs");var V=this.options.animation.duration;var D;a.attr("width",S).attr("height",P.top+A+P.bottom).transition().ease(i[this.options.animation.ease]).duration(V);var E=[{graphs:this.runtime.graphs,textStyle:o.style.graph.item.value,sliceStrokeColor:n().get(u,"style.sliceStrokeColor"),sliceStrokeWidth:n().get(u,"style.sliceStrokeWidth"),calloutColor:null==u?void 0:null===(t=u.style)||void 0===t?void 0:t.calloutColor,outerRadius:k,outerRadiusVaries:R,center:{x:S/2,y:P.top+A/2},bounds:{width:S,height:A},legend:w,defs:M,animationEnd:b,transitionDuration:V,startAngle:null!==(D=null===(r=u.series)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.startAngle)&&void 0!==D?D:0}];l.addGraph(E),l.addParent(q.select(".parts"),O,"igc-pie-center-text"),this.events.call("startAnimation"),l.start()}}},{key:"containerSetup",value:function(){var t=this.root,e=this.groupTagName;this.isSvg&&t.selectAll("defs").data([0]).enter().append("defs"),t.selectAll(".igc").data([0]).enter().append(e).attr("class","igc").append("g").attr("class","parts")}},{key:"graphInstanceSetup",value:function(t,e,r,a){var n=this.runtime.formatter;var i=function(t){return n.tooltip.x.format(t)};var o=this.getCalloutFormat(e);var l=this.getCalloutPctFmt();t.data(e.data).groupId(r).textStyle(a.textStyle).legend(a.legend).innerRadius(e.innerRadiusPercent?e.innerRadiusPercent*a.outerRadius:e.innerRadius).outerRadius(a.outerRadius).outerRadiusVaries(a.outerRadiusVaries).startAngle(a.startAngle).sliceStrokeColor(a.sliceStrokeColor).sliceStrokeWidth(a.sliceStrokeWidth).calloutColor(a.calloutColor).bounds(a.bounds).center(a.center).showValues(e.showValues).alpha(this.options.opacity).textFormat(o).defs(a.defs).transitionDuration(a.transitionDuration).tooltip((0,p.createStyledTooltip)(this)).tooltipText(function(t){return t.data.categoryLabel}).tooltipValue(function(t){return"".concat(i(t.data.valueLabel))}),e.showPercent&&(t.tooltipText(function(t){return"".concat(t.data.categoryLabel,": ").concat(l(t.value),"%")}),t.tooltipValue(function(t){return"(".concat(i(t.data.valueLabel),")")})),t.dispatch().on("animationEnd",function(){return a.animationEnd()})}},{key:"getCalloutPctFmt",value:function(){var t=this.runtime,e=t.formatter,r=t.sheet;var a=e.labels;var i=n().get(a,"config.prefix","");var o=n().get(a,"config.suffix","");return function(t){return"".concat(i).concat(a.locale.format(",.".concat(r.decimalPlaces,"f"))(t)).concat(o)}}},{key:"getCalloutFormat",value:function(t){var e=this.runtime.formatter;var r=function(t){return e.labels.format(t)};var a=this.getCalloutPctFmt();return t.showPercent&&t.showCategoryName?function(t){return(0,c.isArabic)(t.data.categoryLabel)?"".concat(a(t.value),"% ").concat(t.data.categoryLabel):"".concat(t.data.categoryLabel," ").concat(a(t.value),"%")}:t.showPercent?function(t){return"".concat(a(t.value),"%")}:t.showCategoryName?function(t){return(0,c.isArabic)(t.data.categoryLabel)?"".concat(r(t.data.valueLabel)," ").concat(t.data.categoryLabel):"".concat(t.data.categoryLabel," ").concat(r(t.data.valueLabel))}:function(t){return r(t.data.valueLabel)}}},{key:"defaults",value:function(){return n().merge({},b(w(a.prototype),"defaults",this).call(this),{animation:{duration:500}})}},{key:"emptySheetData",value:function(){return n().merge({},b(w(a.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pie",showValues:!1,showPercent:!1,showTitle:!1,outerRadiusPct:.8}]})}},{key:"prepareSheetData",value:function(t){var e=t.series[0];var r=t.categories.colors;var a=[];var n=(0,d.createLegendData)(this);var i=0;return e.data.forEach(function(o,l){var s={categoryLabel:(0,u.replaceBlank)(t.categories.data[l]),valueLabel:(0,u.replaceBlank)(e.rawData[l]),x:(0,u.replaceBlank)(o,null),color:(0,u.getColor)(l,r),groupId:l,link:e.links?e.links[l]:null};if(null!==s.x){if(!n({color:s.color,title:s.categoryLabel,groupId:l}).active)return;var c=Math.abs(s.x);s.xAbs=c,i+=c,a.push(s)}}),a.forEach(function(t){t.pct=0===i?0:t.xAbs/i*100}),[{type:e.type,data:a,showValues:!0===e.showValues,showPercent:!0===e.showPercent,showCategoryName:!0===e.showCategoryName,innerRadius:e.innerRadius||0,innerRadiusPercent:e.innerRadiusPercent||0,outerRadiusVaries:!0===e.outerRadiusVaries,showTitle:!0===e.showTitle}]}},{key:"applySheetOptions",value:function(t){t&&this.options.sheets.forEach(function(e,r){var a=t[r+1]||t[0];e.decimalPlaces=a.decimalPlaces,a.categories&&n().merge(e.categories,a.categories),a.legend&&n().merge(e.legend,a.legend),e.series.forEach(function(t){n().merge(t,a.series)}),a.tooltip&&(e.tooltip=e.tooltip||{},n().merge(e.tooltip,a.tooltip)),a.labels&&(e.labels=e.labels||{},n().merge(e.labels,a.labels)),a.axis&&a.axis[0]&&a.axis[0].format&&(e.axis[0]||(e.axis[0]={}),n().merge(e.axis[0],a.axis[0])),a.style&&(e.style=a.style)})}}],x(a.prototype,o),y&&x(a,y),a}(o.Chart)},3900:(t,e,r)=>{r.r(e),r.d(e,{Controls:()=>l});var a=r(3897);var n=r(3898);var i=r(3901);var o={tab:a.TabSwitcher,player:n.Player,radio:i.RadioSwitcher};function l(t){var e=t.options.sheetSwitch;var r;o[null!==(r=null==e?void 0:e.type)&&void 0!==r?r:"radio"].apply(null,arguments)}},3901:(t,e,r)=>{r.r(e),r.d(e,{RadioSwitcher:()=>u});var a=r(498);var n=r.n(a);var i=r(1117);var o=r(3902);var l=r(3898);var s=r(3892);function u(t,e){var r=t.container,a=t.options,u=t.sheetIndex;var c=a.sheets;var h=t.interaction;if((0,l.removeSheetPlayer)(t),r.selectAll(".igc-sheets").remove(),!(0,s.sheetsEmpty)(t)){var d=n().get(a,"style.sheetSwitch.radio");var f;var v=(f=r.insert("span").attr("class","igc-sm-sheet-switch-radio").style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px").append("div").attr("class","igc-sheets").append("div").attr("class","igc-sheet").append("span").attr("class","igc-sheet-ico").node().offsetWidth,r.select(".igc-sm-sheet-switch-radio").remove(),f);var p=(0,o.TextItemMetrics)().width(e.width).texts(c.map(function(t){return t.categories.title})).style(d).parentContainer(r).reservedSize(v+20)();var g=r.insert("div",".igc-content").attr("class","igc-sheets").attr("role","radiogroup").attr("aria-label","select sheet").style("width","".concat(e.width,"px"));var y=g.selectAll(".igc-sheet").data(c.map(function(t,e){return{name:t.categories.title,sheetIndex:e}}));(y=y.merge(y.enter().append("div"))).attr("class","igc-sheet").attr("role","radio").attr("aria-checked",function(t){return t.sheetIndex===u?"true":"false"}).attr("aria-labelledby",function(t){return"igc-sheet-label".concat(t.sheetIndex)}).attr("class",function(t){return t.sheetIndex===u?"igc-sheet active":"igc-sheet"}).style("max-width","".concat(p.width,"px")),y.append("span").attr("class","igc-sheet-ico").attr("role","presentation").attr("id",function(t){return"igc-sheet-".concat(t.sheetIndex)}),y.append("span").attr("class","igc-sheet-label").html(function(t){return t.name}).attr("id",function(t){return"igc-sheet-label".concat(t.sheetIndex)}).styles(d).style("height","".concat(p.label.height,"px")).style("max-width","".concat(p.label.width,"px")),y.on("click",function(e,a){var n=(0,i.default)(this);h("sheetSwitch.item","click"),t.sheetIndex!==a.sheetIndex&&(r.selectAll(".igc-sheet.active").attr("class","igc-sheet").attr("aria-checked","false"),n.classed("active",!0).attr("aria-checked","true"),t.sheetIndex=a.sheetIndex,delete t.legendData,t.render())}),(0,s.subtractHeight)(t,g.node())}}},7769:(t,e,r)=>{r.r(e),r.d(e,{Text:()=>s});var a=r(498);var n=r.n(a);var i=r(3851);var o=r(3894);var l=r(1114);function s(){var t=function(t){t.each(function(){t.selectAll(".".concat(f)).remove();var r=t.append("text").attr("class",f);r.text(o.Text.unescapeHtml(a)).attr("x",0).attr("y",0).style("font-size",null).style("font-family",null).style("font-weight",null).style("font-style",null).style("fill",null).style("visibility","hidden"),r.styles(c),d&&function(t){var e=parseInt(t.style("font-size"),10);var r=(0,l.setupBBox)();t.style("font-size","0px");var a=r(t.node()).width;return t.style("font-size","".concat(e,"px")),0===a}(r)&&e(r);var n=0;var i=0;var v="start";var p=(0,l.getSvgTextNodeMetrics)(r.node());var g=p.height-p.baseLineOffset;i+=u.height/2+g+g/2,"center"===h?(v="middle",n+=u.width/2):"right"===h&&(v="end",n+=u.width),r.attr("x",s.left+n).attr("y",s.top+i).attr("text-anchor",v).style("visibility",null)})};var e=function(t){if(n().has(u,"radius")){var e=u.radius;var a={width:2*Math.cos(30*Math.PI/180)*e,height:2*Math.sin(30*Math.PI/180)*e};var i=Math.cos(45*Math.PI/180)*e*2;r(t,function(t){var e=t.width,r=t.height;return e<=a.width&&r<=a.height||e<=i&&r<=i});return}var o=parseInt(t.style("font-size"),10);t.style("font-size","".concat(5,"px"));var l=v(t.node()).width;t.style("font-size","".concat(o,"px")),u.width>=l?r(t,function(t){return u.width>=t.width}):t.text("")};var r=function(t,e){var r=parseInt(t.style("font-size"),10);for(var a=r;a>=5&&(t.style("font-size","".concat(a,"px")),!e(v(t.node())));a--);};var a="";var s={top:0,left:0};var u={width:0,height:0};var c=(0,i.defaultTextStyle)();var h="left";var d=!1;var f="igc-element-text-node";var v=(0,l.setupBBox)();return Object.assign(t,{value:function(e){return arguments.length?(a=e,t):a},offset:function(e){return arguments.length?(s.left="number"==typeof e.left?e.left:s.left,s.top="number"==typeof e.top?e.top:s.top,t):s},bounds:function(e){return arguments.length?(u.width="number"==typeof e.width?e.width:u.width,u.height="number"==typeof e.height?e.height:u.height,n().has(e,"radius")&&"number"==typeof e.radius?u.radius=e.radius:n().has(u,"radius")&&delete u.radius,t):u},style:function(e){return arguments.length?(c=n().merge({},e),n().get(c,"color")&&(c.fill=c.color,delete c.color),t):c},align:function(e){return arguments.length?(h=e,t):h},autoFontSize:function(e){return arguments.length?(d=e,t):d},cssClassName:function(e){return arguments.length?(f=e,t):f}}),t}},7771:(t,e,r)=>{r.r(e),r.d(e,{Needle:()=>s});var a=r(498);var n=r.n(a);var i=r(1117);var o=r(1999);var l=r(1115);function s(){var t=function(t){t.each(function(){var t=(0,i.default)(this);var s=e[0];var u=e[0].next;var c=[{startAngle:l.math.preciseNumber(l.rad*s.endAngle),endAngle:l.math.preciseNumber(l.rad*u.endAngle),innerRadius:0,outerRadius:u.outerRadius,color:s.color}];var h=t.selectAll(".igc-graph-pie-needle").data(c);(h=h.merge(h.enter().append("rect").attr("class","igc-graph-pie-needle"))).attr("rx",6).attr("ry",6).attr("x",-4).attr("y",function(t){return-(t.outerRadius-t.innerRadius)}).attr("width",8).attr("height",function(t){return t.outerRadius-t.innerRadius}).attr("transform",function(t){return"rotate(".concat(t.startAngle,")")}).style("opacity",r.colors.opacity).style("fill",(0,o.rgb)(n().get(r,"colors.fill")).toString()),h.transition().duration(a).attr("transform",function(t){return"rotate(".concat(t.endAngle,")")})})};var e=[];var r={colors:{fill:"#000000"}};var a=500;return Object.assign(t,{data:function(r){return arguments.length?(e=r,t):e},style:function(e){return arguments.length?(n().merge(r,e),t):r},transitionDuration:function(e){return arguments.length?(a=e,t):a}}),t}},7770:(t,e,r)=>{r.r(e),r.d(e,{Pie:()=>S});var a=r(498);var n=r.n(a);var i=r(3906);var o=r(7713);var l=r(420);var s=r(1117);var u=r(7772);var c=r(7776);var h=r(3863);var d=r(1113);var f=r(3851);var v=r(1115);var p=r(3855);var g=r(1114);var y=r(7771);var m=r(3893);var x=r(7719);var b=r(1998);function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function S(){var t=function(t){if(!J.length){te.call("animationEnd");return}t.each(function(){var t=(0,s.default)(this);var o;var l=(0,u.default)().startAngle(ta).endAngle(tn).sort(null).value(function(t){return t.pct});t.attr("transform","translate(".concat(ty.x,", ").concat(ty.y,")"));var h=l(J);tl&&(ts=(0,i.default)(h,function(t){return t.value})||to),e(h),t.selectAll(".igc-graph-pie-pointer").remove(),t.selectAll(".igc-graph-pie-label").remove(),t.selectAll(".igc-graph-pie-piece-label").remove(),tu&&(a(t,h),P(o=S(t)));var d=t.selectAll("path.".concat(tq));var f=[];d.each(function(t){f.push(t)}),0===f.length&&e(f=l(tT(h)));var p=ti;var m=to;var x=f.length;var w=f[x-1];var I=0;w&&(p=w.innerRadius,m=w.outerRadius,I=w.endAngle),(0,g.pairData)(f,h,function(t){t.startAngle=I,t.endAngle=I,t.padAngle=0,t.value=0,t.innerRadius=p,t.outerRadius=m});var k=d.data(f);var R=(0,b.rgb)("#fff");if(R.opacity=v.eps,k.exit().transition().style("fill",R.toString()).duration(tP).attrTween("d",tp(function(){return{startAngle:tn,endAngle:tn,innerRadius:ti,outerRadius:to}})).remove(),(k=k.merge(k.enter().append("path").attr("class",tq))).attr("d",(0,c.default)()).style("fill",function(t){return t.next.data.color}).style("opacity",tv).style("stroke-width",td).style("stroke",function(t){return"transparent"===t.next.data.color?null:th||null}),n().get(tO,"enabled",!1)){var C=(0,y.Needle)().data(f).style(n().omit(tO,"enabled")).transitionDuration(tP);t.call(C)}k.transition().duration(tP).attrTween("d",tp(function(t){return t.next})).on("start",function(){tt++}).on("end",function(){0==--tt&&(tu&&o&&o.length&&A(t,o),tc&&r(t,h),$(k,t.selectAll(".igc-graph-pie-pointer"),t.selectAll(".igc-graph-pie-label")),H(k),setTimeout(function(){te.call("animationEnd")},0))}),Z&&Z.addListener({id:Q,dispatch:te})})};var e=function(t){t.forEach(function(t){t.innerRadius=ti,tl?t.outerRadius=ti+(to-ti)*(t.value/ts):t.outerRadius=to})};var r=function(t,e){var r=t.selectAll(".igc-graph-pie-piece-label").data(e);e.forEach(function(t){t.arcmetrics=W(t),t.color=t.data.color,t.inside=!0});var a=(0,x.setupFillColor)(tr);var n=(0,x.labelInfo)(tr);var i=(0,c.default)().outerRadius(ti).innerRadius(ti);var o=(0,c.default)().outerRadius(to).innerRadius(to);(r=r.merge(r.enter().append("foreignObject").attr("class","igc-graph-pie-piece-label").attr("width",to-ti).attr("height",to-ti).attr("transform",function(t){var e=(1===t.arcmetrics.side?180*t.arcmetrics.centerAngle/Math.PI:(t.arcmetrics.centerAngle+Math.PI)*180/Math.PI)-90;var r;var a=function(t){if(Array.isArray(t))return t}(r=1===t.arcmetrics.side?i.centroid(t):o.centroid(t))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a=[];var n=!0;var i=!1;var o,l;try{for(r=r.call(t);!(n=(o=r.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){i=!0,l=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw l}}return a}}(r,2)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return"translate("+[a[0],a[1]]+") rotate("+e+")"}).append("xhtml:div").attr("xmlns","http://www.w3.org/1999/xhtml").style("color",a).attr("class","igc-graph-pie-inline-label").style("text-shadow",n.manual?"-1px -1px 0 ".concat(n.stroke,", 1px -1px 0 ").concat(n.stroke,", -1px 1px 0 ").concat(n.stroke,", 1px 1px 0 ").concat(n.stroke):"none").text(function(t){return t.data.text}))).styles(tr),t.selectAll(".igc-graph-pie-inline-label").each(function(t){var e=t.startAngle,r=t.endAngle;t.outerRadius*(r-e)*.7<(0,m.outerHeight)(this)&&(0,s.default)(this).style("display","none"),(0,s.default)(this).style("margin-top","-".concat(this.clientHeight/2,"px"))})};var a=function(t,e){var r=(0,g.getAllTextDimensions)(e.map(tg),tr);var a=to+tI;e.forEach(function(t){t.arcmetrics=W(t)});var n=t.selectAll(".igc-graph-pie-label").data(e);n=n.merge(n.enter().append("text").attr("class","igc-graph-pie-label")),tS=r.height,n.attr("text-anchor",function(t){return 1===t.arcmetrics.side?"start":"end"}).attr("x",function(t){return I(a,t.arcmetrics.centerAngle-v.PIhalf)}).attr("y",function(t){return k(a,t.arcmetrics.centerAngle-v.PIhalf)}).attr("fill",function(t){return tf||t.data.color}).text(tg).styles(tr).style("opacity",v.eps);var i=t.selectAll(".igc-graph-pie-pointer").data(e);(i=i.merge(i.enter().append("path").attr("class","igc-graph-pie-pointer"))).attr("stroke",function(t){return tf||t.data.color}).attr("fill","none").style("opacity",v.eps)};var S=function(t){var e=t.selectAll(".igc-graph-pie-label");var r=t.selectAll(".igc-graph-pie-pointer");var a=[];var n={left:[],leftSlots:[],right:[],rightSlots:[]};var i=tm.height>>0;var o=i%tS/2;for(var l=o;l<=i;l+=tS)n.leftSlots.push(l),n.rightSlots.push(l);return n.leftSlots.pop(),n.rightSlots.pop(),n.leftSlotsInitial=n.leftSlots.slice(0),n.rightSlotsInitial=n.rightSlots.slice(0),e.each(function(t,e){var i=t.arcmetrics,o=i.centerAngle,l=i.side;var s=tR(this);var u={visible:!0,node:this,pointerNode:r._groups[0][e],bbox:s,bboxTrans:C(s),data:{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,centerAngle:o},origData:t};-1===l?n.left.push(u):n.right.push(u),a.push(u)}),q("left",n),q("right",n),M("left",n),M("right",n),a};var P=function(t){t.forEach(function(t){var e=(0,s.default)(t.node);if(n().has(t,"slotY")){var r=t.slotY;var a=t.origData.arcmetrics.side;var i=parseFloat(e.attr("y"));var o=r+(t.baseYOffs=i-t.bbox.y);var l=to+tI;e.attr("y",o);var u=a*L(o>0?r:o,l);e.attr("x",u)}else t.visible=!1}),(t=t.filter(function(t){return n().has(t,"slotY")})).forEach(function(t){var e=D(t);var r=j(t,e);var a=t.slotIndex;var n=0;var i=!0;if(0===r){V(t);return}for(;i&&n<=r;)a=t.slotIndex+e*n,i=N(t,a),n++;if(t.slotIndex===a){V(t);return}(function t(e,r,a){var n=e.slotIndex;var i=e.slotsInitial,o=e.slots,l=e.slotsItems;for(;a;){null===o[n+=1*r]&&t(F(n,l),r,1),o[n]=null,o[e.slotIndex]=i[e.slotIndex],e.slotIndex=n,e.slotY=i[n]-ty.y;var u=n+r;null===o[u]&&function t(e,r){var a=e.slotY,n=e.node,i=e.slotIndex,o=e.slots,l=e.slotsInitial,u=e.slotsItems,c=e.baseYOffs;var h=(0,s.default)(n);var d=l[i]-ty.y;var f=i+r;d!==a&&(h.attr("y",d+c),null===o[f]&&t(F(f,u),r))}(F(u,l),r),E(e),a--}})(t,e,n-1),V(t)}),t.forEach(function(t){Y(t),_(t)})};var A=function(t,e){var r=t.selectAll(".igc-graph-pie-label");var a=t.selectAll(".igc-graph-pie-pointer");r.style("display",function(t,r){return e[r].visible?null:"none"}).style("opacity",null),a.style("display",function(t,r){return e[r].visible?null:"none"}).style("opacity",tv)};var I=function(t,e){return t*Math.cos(e)};var k=function(t,e){return t*Math.sin(e)};var R=function(t,e){return{x:I(t,e),y:k(t,e)}};var C=function(t){return(0,g.extendBBox)({x:ty.x+t.x,y:ty.y+t.y,width:t.width,height:t.height})};var T=function(t,e){return e.y-t.y};var O=function(t,e){t.sort(function(t,r){return(r.data.centerAngle-t.data.centerAngle)*e})};var q=function(t,e){var r=e[t+"Slots"].length;var a=e[t];var n=a.length;var i=[].concat(a);if(O(a,"left"===t?1:-1),!(n<=r)){i.sort(function(t,e){return e.origData.value-t.origData.value});var o=n;for(;o--;)i[o].rank=o;for(o=n;o--;)a[o].rank>=r&&a.splice(o,1)}};var M=function(t,e){var r=e[t];var a=r.length;var n=e[t+"Slots"];var i=n.length;var o=[];var l=n[0];var s=n[i-1];return r.forEach(function(t,e){var r;var l=t.bboxTrans.y;var s=null!==n[e];for(var u=0,c=99999;u<i;u++){var h=Math.abs(n[u]-l);h<c&&(c=h,r=u)}if(s&&r<e)r=e;else if(s&&a-e+r>i)for(r=i-a+e;null===n[r];)r++;else for(;null===n[r];)r++;o.push({i:r,y:n[r]}),n[r]=null}),o.sort(T),r.forEach(function(r){var a=r.bboxTrans.y;var i=o.pop();var u=i.i;var c=i.y;(a>c&&null!==n[u+1]||a<c&&null!==n[u-1])&&(c=Math.min(Math.max(l,a),s)),r.slotY=c-ty.y,r.slotIndex=u,r.slotsItems=e[t],r.slots=e[t+"Slots"],r.slotsInitial=e[t+"SlotsInitial"]}),o};var V=function(t){var e=t.node;var r=t.origData.arcmetrics.side;var a=-1*(tR(e).y+tS/2);-1===r?a>0?(t.quadrant="q2",t.quadrantCounter=tk.q2,tk.q2++):(t.quadrant="q3",t.quadrantCounter=tk.q3,tk.q3++):a>0?(t.quadrant="q1",t.quadrantCounter=tk.q1,tk.q1++):(t.quadrant="q4",t.quadrantCounter=tk.q4,tk.q4++)};var D=function(t){return t.bbox.y+.5*t.bbox.height<0?-1:1};var E=function(t){var e=t.node,r=t.slotY,a=t.origData;var n=(0,s.default)(e);var i=a.arcmetrics.side;var o=r+t.baseYOffs;var l=to+tI;n.attr("y",o);var u=i*L(o>0?r:o,l);n.attr("x",u)};var N=function(t,e){var r=t.slotIndex,a=t.slotsInitial,n=t.node,i=t.origData,o=t.bbox,l=t.baseYOffs;var u=i.arcmetrics.side;var c=to+tI;var h=(0,s.default)(n);var d=a[e]-ty.y;var f=r===e?parseFloat(h.attr("y")):d+l;return Math.abs(u*L(f>0?d:f,c)+u*o.width)>ty.x};var L=function(t,e){var r=t/e;return Math.cos(Math.asin(r=r>=0?Math.min(r,1):Math.max(r,-1)))*e};var j=function(t,e){var r=t.slotIndex,a=t.slots;return -1===e?a.slice(0,r).filter(function(t){return null!==t}).length:a.slice(r).filter(function(t){return null!==t}).length};var F=function(t,e){var r=e.length;for(var a=0;a<r;a++){var n=e[a];if(n.slotIndex===t)return n}};var z=function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))};var B=function(t,e){var r=e.shift();return e.forEach(function(e){z(t,e)<z(t,r)&&(r=e)}),r};var Y=function(t){var e=t.node,r=t.origData,a=t.baseYOffs;var n=r.arcmetrics,i=n.centerAngle,o=n.side;var l=-1===o?tR(e).x+tR(e).width:tR(e).x;var u=(tI-tA)*(t.quadrantCounter/tk[t.quadrant]);var c=to+tA+u;var h=R(c,i-v.PIhalf);var d=[{x:l,y:tR(e).y},{x:l,y:tR(e).y+a/2},{x:l,y:tR(e).y+a}];var f=B(h,d);var p=f;var g=(0,s.default)(t.pointerNode);var y=c/z({x:0,y:0},p);var m={x:p.x*y,y:p.y*y};var x=Math.atan2(-1*m.y,m.x);-1===o&&x===v.PIhalf&&(x+=1e-6),"q1"===t.quadrant&&(x=v.PIhalf-x),"q2"===t.quadrant&&(x=v.PI2-x+v.PIhalf),("q3"===t.quadrant||"q4"===t.quadrant)&&(x=v.PIhalf+-1*x),m.radius=to+tA,f=B(m,d);var b=c*Math.abs(x-i)<=10;var w=R(r.outerRadius,i-v.PIhalf);if(b){var S;return g.attr("d",["M",(S=[w,h,f])[0].x,S[0].y,"L",S[1].x,S[1].y,"L",S[2].x,S[2].y].join(" "))}var P;return m.sweepFlag=-1===o?+(m.y-h.y<0):+(m.y-h.y>0),g.attr("d",["M",(P=[w,h,m,f])[0].x,P[0].y,"L",P[1].x,P[1].y,"A",P[2].radius,P[2].radius,0,0,P[2].sweepFlag,P[2].x,P[2].y,"L",P[3].x,P[3].y].join(" "))};var H=function(t){t.classed("igc-chart-link",function(t){return!t.data.tooltipColor&&!!(t.data&&t.data.link)}).on("mouseover",function(){tC().interaction("show")}).on("mousemove",function(t,e){if(n().get(e,"data.tooltip",!0)){var r=(0,g.getMousePosition)(t);var a=tx(e);var i=tb(e);if(a||i){if(e.data.tooltipColor){var o=(0,b.rgb)(e.data.tooltipColor);o.opacity=.5,(0,s.default)(this).style("fill",o.toString())}else tM.call("highlightStart",null,e.data.groupId,Q);tC().setText(a).setValue(i).setPosition(r,e.data.tooltipColor||e.data.color)}}}).on("mouseout",function(t,e){if(tC().hide(),e.data.tooltipColor){var r=e.data.color;(0,s.default)(this).style("fill",r.toString())}else tM.call("highlightEnd",null,e.data.groupId,Q)}).on("click",function(t,e){te.call("openUrl",null,n().get(e,"data.link"))})};var W=function(t){var e=(t.endAngle+t.startAngle)/2;return{side:e<0?e>=-v.PI?-1:1:e>=v.PI2?1:e>=v.PI?-1:1,centerAngle:e}};var _=function(t){var e=(0,s.default)(t.node);var r=tR(t.node);var a=parseFloat(e.attr("x"));var n=a<0?-1:1;var i=Q+"-label-limit-"+(-1===t.origData.arcmetrics.side?"left":"right")+"-"+t.slotIndex;var o="#"+i;var l=tw.selectAll(o);var u=!1;if(u=Math.abs(a+n*r.width)>ty.x,l.remove(),u&&1!==n){var c={x:n*ty.x,y:r.y,width:ty.x-n*a,height:r.height};tw.selectAll(o).data([0]).enter().append("clipPath").attr("id",i).selectAll("path").data([0]).enter().append("path").attr("d",(0,p.barToRight)(c.x,c.y,c.width,c.height,0)),e.attr("clip-path","url(".concat((0,g.absoluteUrl)(i),")")).attr("text-anchor","start").attr("x",c.x)}};var G=function(t){return function(e){return t===e.data.groupId}};var K=function(t){return function(e){return t!==e.data.groupId}};var U=function(t){return function(e){return t!==e.data.groupId&&"none"!==(0,s.default)(this).style("display")}};var $=function(t,e,r){te.on("highlightStart",function(a,n){Q===n&&(t.filter(G(a)).style("fill",function(t){if(t.data.tooltipColor){var e=(0,b.rgb)(t.data.tooltipColor);return e.opacity=.5,e.toString()}return t.data.color}),t.filter(K(a)).transition().duration(150).ease(h.linear).style("opacity",.3*tv),e.filter(U(a)).transition().duration(150).ease(h.linear).style("opacity",.3),r.filter(U(a)).transition().duration(150).ease(h.linear).style("opacity",.3))}),te.on("highlightEnd",function(a,n){Q===n&&(t.filter(G(a)).style("fill",function(t){return t.data.color}),t.filter(K(a)).transition().duration(150).ease(h.linear).style("opacity",tv).on("end",function(){(0,s.default)(this).style("opacity",tv)}),e.filter(U(a)).transition().duration(150).ease(h.linear).style("opacity",tv).on("end",function(){(0,s.default)(this).style("opacity",tv)}),r.filter(U(a)).transition().duration(150).ease(h.linear).style("opacity",1).on("end",function(){(0,s.default)(this).style("opacity",null)}))})};var J=[];var Q;var X;var Z;var tt=0;var te=(0,l.default)("highlightStart","highlightEnd","animationEnd","openUrl");var tr=(0,f.chartOptions)().style.graph.item.value;var ta=0;var tn=2*v.PI2;var ti=0;var to=0;var tl=!1;var ts=0;var tu=!1;var tc=!1;var th;var td=1;var tf;var tv=1;var tp=(0,p.createTweenShape)((0,c.default)());var tg=function(t){return"".concat(t.data.valueLabel)};var ty={x:0,y:0};var tm={width:120,height:100};var tx=function(t){return t.data.categoryLabel};var tb=function(t){return t.data.valueLabel};var tw;var tS=13;var tP=500;var tA=4;var tI=10;var tk={q1:0,q2:0,q3:0,q4:0};var tR=(0,g.setupBBox)();var tC=d.getTooltip;var tT=function(t){var e=t.length;return(0,o.default)(0,e).map(function(r,a){return{pct:1/e*100,color:t[a].data.color}})};var tO={color:{fill:"#000000"}};var tq="igc-graph-pie-piece";var tM=function(){};return Object.assign(t,{data:function(e){return arguments.length?(J=e,t):J},groupId:function(e){return arguments.length?(X=e,t):X},chartId:function(e){return arguments.length?(Q=e,t):Q},legend:function(e){return arguments.length?(Z=e,t):Z},textStyle:function(e){return arguments.length?(tr=e,t):tr},innerRadius:function(e){return arguments.length?(ti=e,t):ti},outerRadius:function(e){return arguments.length?(to=e,t):to},outerRadiusVaries:function(e){return arguments.length?(tl=e,t):to},sliceStrokeWidth:function(e){return arguments.length?(td=e,t):td},sliceStrokeColor:function(e){return arguments.length?(th=e,t):th},calloutColor:function(e){return arguments.length?("transparent"===e||(tf=e),t):tf},alpha:function(e){return arguments.length?(tv=e,t):tv},showValues:function(e){return arguments.length?(tu=!!e,t):tu},showValuesOnSlices:function(e){return arguments.length?(tc=!!e,t):tc},textFormat:function(e){return arguments.length?("function"==typeof e&&(tg=e),t):tg},center:function(e){return arguments.length?(ty.x="number"==typeof e.x?e.x:ty.x,ty.y="number"==typeof e.y?e.y:ty.y,t):ty},bounds:function(e){return arguments.length?(tm.width="number"==typeof e.width?e.width:tm.width,tm.height="number"==typeof e.height?e.height:tm.height,t):tm},tooltipText:function(e){return arguments.length?(tx=e,t):tx},tooltipValue:function(e){return arguments.length?(tb=e,t):tb},tooltip:function(e){return arguments.length?(tC=e,t):tC},defs:function(e){return arguments.length?(tw=e,t):tw},startAngle:function(e){return arguments.length?(ta=e,t):ta},endAngle:function(e){return arguments.length?(tn=e,t):tn},dispatch:function(){return te},transitionDuration:function(e){return arguments.length?(tP=e,t):tP},startValuesFn:function(e){return arguments.length?(tT=e,t):tT},needle:function(e){return arguments.length?(n().merge(tO,e),t):tO},className:function(e){return arguments.length?(tq=e,t):tq},sharedDispatch:function(e){return arguments.length?(tM=e,t):tM}}),t}},3902:(t,e,r)=>{r.r(e),r.d(e,{TextItemMetrics:()=>l,createMeasurement:()=>o});var a=r(3851);var n=r(1114);function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t.append("span").styles(e).style("white-space","nowrap").style("line-height",r).style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px")}function o(t){var e=t.style,r=t.container,a=t.lineHeight;return function(t){var o=i(r,e,a);var l=(0,n.measureTextHtml)(t,o.node());return o.remove(),l}}function l(){var t=function(){if(s){var t=i(s,o);var a=(0,n.measureTextHtmlHeight)(e,t.node());return t.remove(),{width:r,label:{width:r-l,height:a+a/4}}}};var e=[];var r=300;var o=(0,a.chartOptions)().style.legend;var l=0;var s;return Object.assign(t,{texts:function(r){return arguments.length?(e=r.slice(0),t):e},width:function(e){return arguments.length?(r=e,t):r},style:function(e){return arguments.length?(o=e,t):o},reservedSize:function(e){return arguments.length?(l=e,t):l},parentContainer:function(e){return arguments.length?(s=e,t):s}}),t}},7724:(t,e,r)=>{function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}r.r(e),r.d(e,{Renderer:()=>n});var n=function(){"use strict";function t(e){if(!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,t),!e.instance)throw Error("No instance provided");this.renderables=[],this.instance=e.instance}var e,r;return e=[{key:"start",value:function(){var t=this.instance;var e=t.root;var r=e.select(".igc");var a={igc:r,grid:r.select(".igc-grid"),title:e.select(".igc-titles")};this.renderables.forEach(function(e){if("function"==typeof e){e();return}if("object"==typeof e){if(-1!==["grid","title"].indexOf(e.parent)){t.renderPart(a[e.parent],e.callable,e.className);return}if("igc"===e.parent){t.renderGraphs(a.igc,e.callable);return}t.renderPart(e.parent,e.callable,e.className)}})}},{key:"add",value:function(t){return this.renderables.push(t),t}},{key:"addGrid",value:function(t,e){var r={callable:t,className:e,parent:"grid"};return this.add(r),r}},{key:"addTitle",value:function(t,e){var r={callable:t,className:e,parent:"title"};return this.add(r),r}},{key:"addParent",value:function(t,e,r){var a={callable:e,className:r,parent:t};return this.add(a),a}},{key:"addGraph",value:function(t){var e={callable:t,parent:"igc"};return this.add(e),e}}],a(t.prototype,e),r&&a(t,r),t}()},1113:(t,e,r)=>{r.r(e),r.d(e,{createStyledTooltip:()=>u,getTooltip:()=>s,setTooltip:()=>l,tooltipDummy:()=>i});var a=r(1114);var n=r(844);var i={setText:function(){return this},setValue:function(){return this},setPosition:function(){return this},show:function(){return(0,n.logError)("Trying to show dummy tooltip"),this},interaction:function(){return this},hide:function(){return o!==i&&o.hide.apply(o,arguments),this},mute:function(){return this},unmute:function(){return this},isVisible:function(){return this},setKey:function(){return this},getKey:function(){return this}};var o=i;function l(t){o=t}function s(){return o}function u(t){var e,r,n,l,s,u,c,h;var d=t.createInteractionCaller();var f=null==t?void 0:null===(r=t.options)||void 0===r?void 0:null===(e=r.tooltip)||void 0===e?void 0:e.enabled;var v=null==t?void 0:null===(s=t.options)||void 0===s?void 0:null===(l=s.style)||void 0===l?void 0:null===(n=l.tooltip)||void 0===n?void 0:n.text;var p=null==t?void 0:null===(h=t.options)||void 0===h?void 0:null===(c=h.style)||void 0===c?void 0:null===(u=c.tooltip)||void 0===u?void 0:u.value;v=v&&(0,a.camelizeObject)(v),p=p&&(0,a.camelizeObject)(p);var g=(0,a.createGetScale)(t.root.node());var y,m;return y=v,m=p,f?function(){return{setText:function(t){return o.setText(t,y),this},setValue:function(t){return"string"!=typeof t||o.setValue(t,m),this},setPosition:function(t,e){return o.setPosition(t,{color:e,scale:g().x}),this},interaction:function(t){return d("tooltip",t),this},show:function(){return o.show.apply(o,arguments),this},hide:function(){return o.hide.apply(o,arguments),this},isVisible:function(){return o.isVisible()},mute:function(){return o.mute(),this},unmute:function(){return o.unmute(),this},setKey:function(){return o.setKey.apply(o,arguments),this},getKey:function(){return o.getKey()}}}:function(){return i}}},7778:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var a=r(498);var n=r.n(a);var i=r(7768);var o=r(7741);var l=r(7742);var s=r(7750);var u=Object.assign({},o.default);u.instanceClass=i.Pie,u.setupChartSheetOptionsItem=function(t){var e,r,a,i,u,c;var h=o.default.setupChartSheetOptionsItem.call(this,t);var d;return(0,l.default)(h,t,this.charts),h.style={sliceStrokeColor:t.sliceStrokeColor||(null===this||void 0===this?void 0:null===(r=this.charts)||void 0===r?void 0:null===(e=r.pie)||void 0===e?void 0:e.sliceStrokeColor),sliceStrokeWidth:null!==(d=t.sliceStrokeWidth)&&void 0!==d?d:null===this||void 0===this?void 0:null===(i=this.charts)||void 0===i?void 0:null===(a=i.pie)||void 0===a?void 0:a.sliceStrokeWidth,calloutColor:t.calloutColor||(null===this||void 0===this?void 0:null===(c=this.charts)||void 0===c?void 0:null===(u=c.pie)||void 0===u?void 0:u.calloutColor)},h.series={showValues:!0===t.showInLineValues,showPercent:!0===t.showInLinePercent,showCategoryName:!0===t.showInLineName,startAngle:(null==t?void 0:t.startAngle)&&(t.startAngle-180)*Math.PI/180||0},h.axis=[{}],h.decimalPlaces=n().get(t,"axis.x.decimalPlaces")?n().get(t,"axis.x.decimalPlacesValue",2):2,(0,s.assignNumberFormatLabels)({sheetOptions:h,custom:t,affixes:[{id:"x",path:"",defaultValue:!0},{id:"label",path:"",defaultValue:!0}],inputDecimalSeparator:this.inputDecimalSeparator}),n().set(h,"labels.format.useSIPrefixes",n().get(t,"useSIPrefixes",!1)),h};let c=Object.freeze(u)},7750:(t,e,r)=>{r.r(e),r.d(e,{assignNumberFormatLabels:()=>u,assignNumberFormatValues:()=>s});var a=r(498);var n=r.n(a);var i=r(1991);var o={label:{libraryTargetPath:"labels.format",customAffixPath:"labels.graph.item.format.affix"},x:{libraryTargetPath:"tooltip.format.x",customAffixPath:"labels.tooltip.format.x.affix"},y:{libraryTargetPath:"tooltip.format.y",customAffixPath:"labels.tooltip.format.y.affix"},y2:{libraryTargetPath:"tooltip.format.y2",customAffixPath:"labels.tooltip.format.y2.affix"}};function l(t,e,r){var a=e.decimalSeparator,o=e.groupingSymbol;o&&n().set(t,"grouping","none"===o?"":o);var l=!1===a;n().set(t,"decimal",l?".,":a);var s=r?new i.default("firstNumber",r):new i.default(l?"legacy":"firstNumber",a);n().set(t,"numberParser",s)}function s(t){var e=t.sheetOptions,r=t.custom,a=t.axis,i=t.inputDecimalSeparator;var o={x:0,y:1,y2:2,x1:0,y1:1};a.forEach(function(t){var a=t.id,s=t.path;var u=s?n().get(r,s,{}):r;var h=e.axis[o[a]];n().has(h,"format")||n().set(h,"format",{});var d=h.format;if(c(d,u),!["x1","y1"].includes(a)){l(d,u,i);var f=["useSIPrefixes"];n().get(r,"axis.".concat(a,".affix"),!0)&&f.push("prefix","suffix"),f.forEach(function(t){var e=n().get(u,t);void 0!==e&&n().set(d,t,e)})}})}function u(t){var e=t.sheetOptions,r=t.custom,a=t.affixes,i=t.inputDecimalSeparator;(void 0===a?[]:a).forEach(function(t){var a=t.id,s=t.path,u=t.ignoreCheck,h=t.defaultValue;var d=o[a];var f=d.libraryTargetPath,v=d.customAffixPath;var p=s?n().get(r,s,{}):r;var g=n().pick(p,"prefix","suffix");c(g,p),l(g,p,i),u||n().get(r,v,h)||(n().unset(g,"prefix"),n().unset(g,"suffix")),n().set(e,f,g)})}function c(t,e){var r=e.decimalPlaces,a=e.decimalPlacesValue;r&&void 0!==a&&n().set(t,"decimalPlaces",a)}}}]);