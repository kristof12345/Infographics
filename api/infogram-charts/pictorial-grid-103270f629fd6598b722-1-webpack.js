(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[54],{7844:(t,e,a)=>{a.r(e),a.d(e,{PictorialGrid:()=>k});var r=a(498);var n=a.n(r);var i=a(7713);var o=a(7738);var l=a(3862);var s=a(1114);var c=a(3807);var u=a(3911);var h=a(7845);var f=a(3912);var v=a(1115);var d=a(3903);var p=a(3900);var g=a(7724);var m=a(1113);var y=a(3909);var x=a(3861);var b=a(7846);function S(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,a){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(a||t):n.value}})(t,e,a||t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,x.putGraph)("pictorial-grid",b.PictorialGrid);var k=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(r,t);var a=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=w(r),a;if(e){var n=w(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);var i;return(i=a)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),a.apply(this,arguments)}var c,x;return x=[{key:"getClassName",value:function(){return"PictorialGrid"}}],c=[{key:"render",value:function(){var t=this;var e=function(t){return(T.rows-Math.ceil(Math.ceil(t)/T.cols))*L.height};this.detectDimensions();var a=this.root,r=this.options;var n=new g.Renderer({instance:this});var s=this.getSheetData();var c=(0,f.formatHelper)(s);var v=this.runtime={width:r.width,height:r.height,inanimate:(0,u.inanimated)(r),sheet:s,formatter:c};var m=r.fixedHeight;var x=this.prepareSheetData(s,this.sheetIndex);var b=x.data;(0,p.Controls)(this,{width:r.width}),(0,y.DownloadButton)(this,r.style.legend);var S=(0,d.legendHelper)({instance:this});if(!this.sheetsNotFound()){var P={top:10,right:10,bottom:10,left:10,pictorial:5};var w=!!r.series.realNumbers;var D="absolute"===r.series.data;var k="scattered"===r.series.distribution&&s.categories.shapes.length<2;var M=this.createAnimationCounter(2);var E=v.width-(P.left+P.right)*s.iconSizeMultiplier;var I=v.height-(P.top+P.bottom)*s.iconSizeMultiplier;var O=v.height;var C=(0,h.availableShapesMetrics)(r.shapes)(this.getShapeKeys());var L=Object.values(C).reduce(function(t,e){return t.width=Math.max(t.width,(e.bbox.width+P.pictorial)*s.iconSizeMultiplier),t.height=Math.max(t.height,(e.bbox.height+P.pictorial)*s.iconSizeMultiplier),t},{width:0,height:0});var T={cols:Math.floor(E/L.width),rows:Math.floor(I/L.height),cellMetrics:L};T.cellCount=T.rows*T.cols,T.colPosition=(0,o.default)().domain((0,i.default)(0,T.cols)).range([0,E]).padding(0),T.rowPosition=(0,o.default)().domain((0,i.default)(0,T.rows)).range([0,I]).padding(0);var j=D&&!w?this.getSheetsValueSum():this.getValueSum(b);if(T.realNumbers=w&&T.cellCount>=j,!m){var A=0;if(w){var z=this.getSheetsMaxData();z&&T.cellCount>=z.valuesSum&&(A=e(z.valuesSum))}else if(D){var N=this.getSheetsMaxData();N&&(A=e(N.valuesSum/j*T.cellCount))}O-=A}var R=x.data=k?this.getShapeDataScattered(s,b,T,C,j):this.getShapeData(s,b,T,C,j);x.overlayData=this.getShapeGroupOverlayPaths(b,R,T),this.prepareShapes(C,s);var V={igc:{x:P.left,y:P.top}};this.containerSetup(),a.attr("width",v.width).attr("height",O);var X=a.select(".igc");n.add(function(){a.datum(t).transition().ease(l[r.animation.ease]).duration(r.animation.duration).on("start",function(){t.events.call("startAnimation")}).on("end",function(){M()}),X.attr("transform","translate(".concat(V.igc.x,", ").concat(V.igc.y,")"))}),n.addGraph([{graphs:[x],transitionDuration:r.animation.duration,legend:S,animationEnd:M}]),n.start()}}},{key:"getShapeKeys",value:function(){var t=this.options,e=this.runtime;var a=!!t.series.realNumbers;var r="absolute"===t.series.data;var i=this.defaults().shapes.map(function(t){return t.title});var o=e.sheet.categories.shapes;return(r||a)&&(o=t.sheets.map(function(t){var e=t.categories.shapes;return!e||e.length<1?i.slice(0):e}),o=n().uniq(n().flatten(o))),o.length||(o=i.slice(0)),o}},{key:"getShapeDataScattered",value:function(t,e,a,r,n){var i=[];var o=0;var l=a.cellMetrics;var c=a.realNumbers;var u=t.iconSizeMultiplier;var h=this.getSheetColors();var f=function(t){var e={categoryIdx:t.categoryIdx,shape:t.shape,valueLabel:t.valueLabel,category:t.category,countDecimal:t.countDecimal,color:(0,s.getColor)(t.categoryIdx,h),link:t.link};var n=o%a.cols;var c=Math.floor(o/a.cols);var f=r[t.shape].bbox;var v=f.width*u;var d=f.height*u;var p=(l.width-v)/2;var g=(l.height-d)/2;return e.xdiff=p,e.ydiff=g,e.cellX=a.colPosition(n),e.cellY=a.rowPosition(c),e.row=c,e.col=n,e.x=e.cellX+p,e.y=e.cellY+g,e.width=v,e.height=d,e.colors=[],i[o]=e,o++,e};var d=function(t,e,a){var n=r[t.shape].bbox;var i=n.width*u;var o=n.height*u;var l=p(e);e.colors.push({x:l*i,width:i*a,height:o,pct:a,color:(0,s.getColor)(t.categoryIdx,h),valueLabel:t.valueLabel,category:t.category,categoryIdx:t.categoryIdx,link:t.link})};var p=function(t){return t.colors.reduce(function(t,e){return t+e.pct},0)};var g;return e.forEach(function(t){var e=t.countDecimal=c?t.value:t.value/n*a.cellCount;if(t.countDecimalFloor=Math.floor(t.countDecimal),t.count=Math.round(t.countDecimal),t.countFraction=t.countDecimal-t.count,!(e<=0))for(g||(g=f(t));e>v.eps;){var r=1;var i=p(g);1===i&&(g=f(t),i=0);var o=r-i;e-r<0&&(r+=e-r),o-r<0&&(r=o),d(t,g,r),e-=r}}),i}},{key:"getShapeData",value:function(t,e,a,r,i){var o=function(t,e){e=arguments.length<2?100:arguments[1];var a=t.length;var r=e-t.reduce(function(t,e){return t+Math.round(e.countDecimal)},0);var i=n().sortBy(t,function(t){return Math.round(t.countDecimal)-t.countDecimal});return i.forEach(function(t,e){t.count=Math.round(t.countDecimal)+(r>e)-(e>=a+r)}),i};var l="absolute"===this.options.series.data;var c=[];var u=0;var h=0;var f=a.cellMetrics;var v=a.realNumbers;var d=this.getSheetColors();var p=0;var g,m;e.forEach(function(t){t.countDecimal=v?t.value:t.value/i*a.cellCount,t.countDecimalFloor=Math.floor(t.countDecimal),p+=t.countDecimal-t.countDecimalFloor,t.count=Math.floor(t.countDecimal),t.countFraction=t.countDecimal-t.count,h+=t.count}),p=parseFloat(p.toPrecision(12)),h+=Math.ceil(p),!l&&!v||v&&h>a.cellCount?(e.forEach(function(t,e){t.sortIndex=e}),e=o(e,a.cellCount),e=n().sortBy(e,function(t){return t.sortIndex})):(e.forEach(function(t,e){t.sortIndex=e}),e=o(e,Math.min(h,a.cellCount)),e=n().sortBy(e,function(t){return t.sortIndex})),e.forEach(function(t){for(var e=0;e<t.count;e++)c[u]={categoryIdx:t.categoryIdx,shape:t.shape,valueLabel:t.valueLabel,category:t.category,link:t.link},u++});var y=0;var x=0;var b,S;for(var P=0;P<u;P++)g=P%a.cols,m=Math.floor(P/a.cols),S=r[(b=c[P]).shape].bbox,y=(f.width-S.width)/2,x=(f.height-S.height)/2,b.xdiff=y,b.ydiff=x,b.cellX=a.colPosition(g),b.cellY=a.rowPosition(m),b.row=m,b.col=g,b.x=b.cellX+y,b.y=b.cellY+x,b.width=S.width*t.iconSizeMultiplier,b.height=S.height*t.iconSizeMultiplier,b.color=(0,s.getColor)(b.categoryIdx,d),b.colors=[{x:0,width:S.width*t.iconSizeMultiplier,height:S.height*t.iconSizeMultiplier,pct:1,color:b.color,valueLabel:b.valueLabel,category:b.category,categoryIdx:b.categoryIdx}];return c}},{key:"getSheetColors",value:function(){return n().get(this.runtime,"sheet.categories.colors")}},{key:"getShapeGroupOverlayPaths",value:function(t,e,a){var r={};var n=a.cellMetrics;t.forEach(function(t){r[t.categoryIdx]||(r[t.categoryIdx]={minX:999999,maxX:-999999,minY:999999,maxY:-999999,categoryIdx:t.categoryIdx,valueLabel:t.valueLabel,category:t.category,link:t.link})});var i=e[0];var o;e.forEach(function(t,l){o=e[l+1]||t;var s=t.colors.length-1;var c=i.xdiff!==t.xdiff?(i.xdiff+t.xdiff)/2:t.xdiff;var u=o.xdiff!==t.xdiff?(o.xdiff+t.xdiff)/2:t.xdiff;var h=0===t.col;var f=t.col===a.cols-1;t.colors.forEach(function(e,i){var o=r[e.categoryIdx];var l=t.row+1;var v=l<a.rows?a.rowPosition(l):t.cellY+n.height;if(!o.firstPos){var d=t.x+e.x;0===i&&(d=h?t.cellX:t.x-c),o.firstPos={x:d,y0:t.cellY,y:v,col:t.col,row:t.row},o.color=e.color,o.cellHeight=n.height}var p=t.x+e.x+e.width;i===s&&(p=f?t.cellX+n.width:t.x+e.x+e.width+(0===s&&1!==e.pct?0:u)),o.lastPos={x0:t.x+e.x-(h?t.xdiff:0),x:p,y0:t.cellY,y:v,col:t.col,row:t.row},o.minX=Math.min(o.minX,o.firstPos.x,o.lastPos.x0,o.lastPos.x),o.maxX=Math.max(o.maxX,o.firstPos.x,o.lastPos.x),o.minY=Math.min(o.minY,o.firstPos.y0,o.lastPos.y0),o.maxY=Math.max(o.maxY,o.firstPos.y,o.lastPos.y)}),i=t});var l=(r=Object.values(r).filter(function(t){return t.lastPos}))[0];return r.forEach(function(t){l!==t&&(t.firstPos.x=Math.min(t.firstPos.x,l.lastPos.x),l=t)}),r.forEach(function(t){var e=function(t,e,r){a.push(t+[e,r].join(","))};var a=[];var r=t.lastPos.row-t.firstPos.row;e("M",t.firstPos.x,t.firstPos.y0),0===r?(e("L",t.lastPos.x,t.firstPos.y0),e("L",t.lastPos.x,t.lastPos.y),e("L",t.firstPos.x,t.lastPos.y),e("L",t.firstPos.x,t.firstPos.y0)):(1===r?(e("L",t.maxX,t.firstPos.y0),e("L",t.maxX,t.lastPos.y0),e("L",t.firstPos.x,t.lastPos.y0),e("M",t.lastPos.x,t.lastPos.y0)):(e("L",t.maxX,t.firstPos.y0),e("L",t.maxX,t.lastPos.y0),e("L",t.lastPos.x,t.lastPos.y0)),e("L",t.lastPos.x,t.lastPos.y),e("L",t.minX,t.lastPos.y),e("L",t.minX,t.firstPos.y),e("L",t.firstPos.x,t.firstPos.y)),t.path=a.join(" ")}),r}},{key:"graphInstanceSetup",value:function(t,e,a,r,n){var i=e.data.length;var o=this.runtime.formatter;var l=(0,u.removeDelay)(this,function(t,e){return e/i*500});t.data(e.data).overlayData(e.overlayData).groupId(n).alpha(this.options.opacity).legend(r.legend).tooltip((0,m.createStyledTooltip)(this)).tooltipText(function(t){return t.category}).tooltipValue(function(t){return o.tooltip.x.format(t.valueLabel)}).transitionDelay(l).transitionDuration(r.transitionDuration),t.dispatch().on("animationEnd",r.animationEnd)}},{key:"prepareShapes",value:function(t,e){var a=this.root;a.selectAll("defs").remove();var r=a.append("defs");Object.keys(t).forEach(function(a){var n=t[a],i=n.shape,o=n.fillRule;var l="igc-cp-".concat(a).concat(this.chartId);r.selectAll("#".concat(l)).data([0]).enter().append("clipPath").attr("id",l).attr("clip-rule",o).selectAll("path").data([0]).enter().append("path").attr("d",i).attr("transform","scale(".concat(e.iconSizeMultiplier,")")).attr("fill-rule",o)},this)}},{key:"getValueSum",value:function(t){return t.reduce(function(t,e){return t+e.value},0)}},{key:"getSheetsValueSum",value:function(){var t=this;return this.options.sheets.reduce(function(e,a,r){var i=n().merge({},t.emptySheetData(),a);var o=t.prepareSheetData(i,r);return e+t.getValueSum(o.data)},0)}},{key:"getSheetsMaxData",value:function(){var t=this;var e=this.options.sheets.reduce(function(e,a,r){var i=n().merge({},t.emptySheetData(),a);var o=t.prepareSheetData(i,r);return e.push({graph:o,shapes:i.categories.shapes,valuesSum:t.getValueSum(o.data)}),e},[]);var a=e[0];var r=0;return e.forEach(function(t){t.valuesSum>r&&(a=t,r=t.valuesSum)}),a}},{key:"defaults",value:function(){return n().merge({},P(w(r.prototype),"defaults",this).call(this),{series:{data:"separate",distribution:"round"},shapes:[{title:"boyPath",shape:"m14.57,9.54l0,5.91q0,0.57,-0.4,0.97t-0.97,0.4t-0.97,-0.4t-0.4,-0.97l0,-5l-0.91,0l0,12.95q0,0.65,-0.47,1.12t-1.12,0.47t-1.12,-0.47t-0.47,-1.12l0,-6.59l-0.91,0l0,6.59q0,0.65,-0.47,1.12t-1.12,0.47t-1.12,-0.47t-0.47,-1.12l0,-12.95l-0.91,0l0,5q0,0.57,-0.4,0.97t-0.97,0.4t-0.97,-0.4t-0.4,-0.97l0,-5.91q0,-1.14,0.8,-1.93t1.93,-0.8l9.09,0q1.14,0,1.93,0.8t0.8,1.93Zm-4.09,-6.36q0,1.32,-0.93,2.25t-2.25,0.93t-2.25,-0.93t-0.93,-2.25t0.93,-2.25t2.25,-0.93t2.25,0.93t0.93,2.25Z"}]})}},{key:"emptySheetData",value:function(){return n().merge({},P(w(r.prototype),"emptySheetData",this).call(this),{categories:{shapes:["boyPath"]},series:[{type:"pictorial-grid",axisIndex:0}],axis:[{}],grid:{}})}},{key:"prepareSheetData",value:function(t,e){var a=t.categories,r=a.data,n=a.shapes,i=a.colors;var o=n.length;var l=t.series[0];var c;if(e===this.sheetIndex){var u=(0,d.createLegendData)(this);c=function(t,e,a){var c=(0,s.replaceBlank)(Math.abs(e),null);if(null===c)return t;var h=(0,s.replaceBlank)(r[a]);return u({color:(0,s.getColor)(a,i),title:h,groupId:a}).active&&t.push({value:c,valueLabel:(0,s.replaceBlank)(l.rawData[a]),category:h,shape:n[a%o],categoryIdx:a,link:l.links?l.links[a]:null}),t}}else c=function(t,e,a){var i=(0,s.replaceBlank)(Math.abs(e),null);if(null===i)return t;var c=(0,s.replaceBlank)(r[a]);return t.push({value:i,valueLabel:(0,s.replaceBlank)(l.rawData[a]),category:c,shape:n[a%o],categoryIdx:a,link:l.links?l.links[a]:null}),t};var h=l.data.reduce(c,[]);return{type:l.type,data:h,colors:i}}},{key:"applySheetOptions",value:function(t){t&&this.options.sheets.forEach(function(e,a){var r=t[a+1]||t[0];e.iconSizeMultiplier=r.iconSizeMultiplier||1,r.categories&&n().merge(e.categories,r.categories),e.series.forEach(function(t){"bar"===t.type&&r.bar&&n().merge(t,r.bar)}),r.legend&&n().merge(e.legend,r.legend),r.tooltip&&(e.tooltip=e.tooltip||{},n().merge(e.tooltip,r.tooltip)),e.axis.forEach(function(t,e){var a=r.axis&&r.axis[e];a&&n().merge(t,a)})})}}],S(r.prototype,c),x&&S(r,x),r}(c.Chart)},3900:(t,e,a)=>{a.r(e),a.d(e,{Controls:()=>l});var r=a(3897);var n=a(3898);var i=a(3901);var o={tab:r.TabSwitcher,player:n.Player,radio:i.RadioSwitcher};function l(t){var e=t.options.sheetSwitch;var a;o[null!==(a=null==e?void 0:e.type)&&void 0!==a?a:"radio"].apply(null,arguments)}},3901:(t,e,a)=>{a.r(e),a.d(e,{RadioSwitcher:()=>c});var r=a(498);var n=a.n(r);var i=a(1117);var o=a(3902);var l=a(3898);var s=a(3892);function c(t,e){var a=t.container,r=t.options,c=t.sheetIndex;var u=r.sheets;var h=t.interaction;if((0,l.removeSheetPlayer)(t),a.selectAll(".igc-sheets").remove(),!(0,s.sheetsEmpty)(t)){var f=n().get(r,"style.sheetSwitch.radio");var v;var d=(v=a.insert("span").attr("class","igc-sm-sheet-switch-radio").style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px").append("div").attr("class","igc-sheets").append("div").attr("class","igc-sheet").append("span").attr("class","igc-sheet-ico").node().offsetWidth,a.select(".igc-sm-sheet-switch-radio").remove(),v);var p=(0,o.TextItemMetrics)().width(e.width).texts(u.map(function(t){return t.categories.title})).style(f).parentContainer(a).reservedSize(d+20)();var g=a.insert("div",".igc-content").attr("class","igc-sheets").attr("role","radiogroup").attr("aria-label","select sheet").style("width","".concat(e.width,"px"));var m=g.selectAll(".igc-sheet").data(u.map(function(t,e){return{name:t.categories.title,sheetIndex:e}}));(m=m.merge(m.enter().append("div"))).attr("class","igc-sheet").attr("role","radio").attr("aria-checked",function(t){return t.sheetIndex===c?"true":"false"}).attr("aria-labelledby",function(t){return"igc-sheet-label".concat(t.sheetIndex)}).attr("class",function(t){return t.sheetIndex===c?"igc-sheet active":"igc-sheet"}).style("max-width","".concat(p.width,"px")),m.append("span").attr("class","igc-sheet-ico").attr("role","presentation").attr("id",function(t){return"igc-sheet-".concat(t.sheetIndex)}),m.append("span").attr("class","igc-sheet-label").html(function(t){return t.name}).attr("id",function(t){return"igc-sheet-label".concat(t.sheetIndex)}).styles(f).style("height","".concat(p.label.height,"px")).style("max-width","".concat(p.label.width,"px")),m.on("click",function(e,r){var n=(0,i.default)(this);h("sheetSwitch.item","click"),t.sheetIndex!==r.sheetIndex&&(a.selectAll(".igc-sheet.active").attr("class","igc-sheet").attr("aria-checked","false"),n.classed("active",!0).attr("aria-checked","true"),t.sheetIndex=r.sheetIndex,delete t.legendData,t.render())}),(0,s.subtractHeight)(t,g.node())}}},7846:(t,e,a)=>{a.r(e),a.d(e,{PictorialGrid:()=>f});var r=a(498);var n=a.n(r);var i=a(420);var o=a(1117);var l=a(3863);var s=a(1113);var c=a(1115);var u=a(1114);var h=a(3905);function f(){var t=function(t){P.duration.y=D,t.each(function(){var t=(0,o.default)(this);if(t.selectAll(".picto-grid-item").remove(),!y.length){E.call("animationStart"),E.call("animationUpdateStart"),E.call("animationUpdateEnd"),E.call("animationEnterEnd"),E.call("animationEnd");return}var r=t.selectAll(".picto-grid-item");r.transition().duration(0);var n=v(r);d(n[0]),a(t,n),e(t,x)})};var e=function(t,e){t.selectAll(".overlay-pictorial").remove(),t.selectAll(".overlay-pictorial").data(e).enter().append("path").attr("class","overlay-pictorial").attr("stroke-width",0).attr("stroke","#000000").attr("fill","transparent").attr("d",function(t){return t.path})};var a=function(t,e){var a=t.selectAll(".picto-grid-item").data(e);a.exit().transition().style("opacity",c.eps).remove();var n=a.enter().insert("g","text");var i=0===a.size()&&a.size()<n.size();var l=P.duration;var s=0;function h(){a=a.merge(n),E.call("animationEnterEnd"),E.call("animationEnd"),r(a),m(t.selectAll(".overlay-pictorial"),t.selectAll(".picto-grid-item rect"))}i?(E.call("animationStart"),E.call("animationUpdateStart"),E.call("animationUpdateEnd"),n.call(p,h)):(E.call("animationStart"),E.call("animationUpdateStart"),a.style("visibility","hidden").attr("clip-path",function(t){return"url(".concat((0,u.absoluteUrl)("igc-cp-".concat(t.next.shape).concat(b)))}).attr("transform",function(t){return"translate("+t.next.x+","+t.next.y+")"}).transition().duration(l.y+l.x).on("start",function(){s++}).on("end",function(){if((0,o.default)(this).style("visibility",null),0==--s){if(E.call("animationUpdateEnd"),E.call("animationEnterStart"),0===n.size()){h();return}n.call(p,h)}}),g(a))};var r=function(t){k&&k.data().forEach(function(t){k.addListener({id:b+"_"+t.groupId,dispatch:E})}),E.on("highlightStart.shape",function(e){t.selectAll("rect").filter(f(e)).transition().duration(150).ease(l.linear).style("opacity",.3*M)}),E.on("highlightEnd.shape",function(e){t.selectAll("rect").filter(f(e)).transition().duration(150).ease(l.linear).style("opacity",M)})};var f=function(t){return function(e){return e.categoryIdx!==t}};var v=function(t){var e=[];return t.each(function(t){t.next;var a=function(t,e){if(null==t)return{};var a=function(t,e){if(null==t)return{};var a={};var r=Object.keys(t);var n,i;for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);var r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,["next"]);e.push(n().merge({},a))}),0===e.length&&(e=y.map(function(t){return n().merge({},t)})),(0,u.pairData)(e,y),e};var d=function(t){var e={x:["xPos","width"]};var a;var r;var n;var i;if(t)for(r in a=t.next,P.duration)e[r]&&(n=e[r].length,i=0,e[r].forEach(o),n===i&&(P.duration[r]=0));function o(e){.2>Math.abs(t[e]-a[e])&&i++}};var p=function(t,e){var a=0;t.attr("class","picto-grid-item").attr("clip-path",function(t){return"url(".concat((0,u.absoluteUrl)("igc-cp-".concat(t.shape).concat(b,")")))}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),t.transition().duration(D).delay(function(){return C+w.apply(this,arguments)}).on("start",function(){g((0,o.default)(this).selectAll("rect")),0===a&&E.call("animationEnterStart"),a++}).on("end",function(){0==--a&&e()})};var g=function(t){var e=t.data(function(t){return t.next.colors});e.exit().remove(),(e=e.merge(e.enter().append("rect"))).attr("x",function(t){return t.x}).attr("y",0).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).style("opacity",M).attr("fill",function(t){return t.color})};var m=function(t,e){L&&(t=t.filter(function(t,e){return 0===e})),t.on("mousemove.pictorial",function(t,a){L||e.filter(f(a.categoryIdx)).transition().duration(150).ease(l.linear).style("opacity",.3*M)}).on("mouseout.pictorial",function(t,a){L||e.filter(f(a.categoryIdx)).transition().duration(150).ease(l.linear).style("opacity",M)}),(0,h.addMouseEvents)(t,E,T,I,O)};var y=[];var x=[];var b;var S;var P={duration:{x:400,y:700,text:50}};var w=0;var D=700;var k;var M=1;var E=(0,i.default)("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","openUrl");var I=function(t){return t.xLabel};var O=function(t){return t.yLabel};var C=0;var L=!1;var T=s.getTooltip;return Object.assign(t,{data:function(e){return arguments.length?(y=e,t):y},overlayData:function(e){return arguments.length?(x=e,t):x},groupId:function(e){return arguments.length?(S=e,t):S},chartId:function(e){return arguments.length?(b=e,t):b},legend:function(e){return arguments.length?(k=e,t):k},tooltip:function(e){return arguments.length?(T=e,t):T},tooltipText:function(e){return arguments.length?(I=e,t):I},tooltipValue:function(e){return arguments.length?(O=e,t):O},transitionDelay:function(e){return arguments.length?(w=e,t):w},transitionDuration:function(e){return arguments.length?(D=e,t):D},transitionTiming:function(e){return arguments.length?(P=e,t):P},alpha:function(e){return arguments.length?(M=e,t):M},renderDelay:function(e){return arguments.length?(C=e,t):C},dispatch:function(){return E},highlightFirstOnly:function(e){return arguments.length?(L=e,t):L}}),t}},3911:(t,e,a)=>{a.r(e),a.d(e,{inanimated:()=>i,removeAnimation:()=>o,removeDelay:()=>l});var r=a(498);var n=a.n(r);function i(t){return 0===n().get(t,"animation.duration")}function o(t){t.forEach(function(t){if(n().has(t,"animationDuration")){t.animationDuration(0);return}n().has(t,"animate")&&t.animate(!1)})}function l(t,e){return n().get(t,"runtime.inanimate")?function(){return 0}:e}},7845:(t,e,a)=>{a.r(e),a.d(e,{availableShapesMetrics:()=>n});var r=a(1114);function n(t){return function(e){return e.reduce(function(e,a){var n=t.find(function(t){return t.title===a})||{};var i=n.shape;if(e[a])return e;var o=(0,r.measurePath)(i);return e[a]={shape:i,bbox:o,fillRule:n.fillRule},e},{})}}},3902:(t,e,a)=>{a.r(e),a.d(e,{TextItemMetrics:()=>l,createMeasurement:()=>o});var r=a(3851);var n=a(1114);function i(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t.append("span").styles(e).style("white-space","nowrap").style("line-height",a).style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px")}function o(t){var e=t.style,a=t.container,r=t.lineHeight;return function(t){var o=i(a,e,r);var l=(0,n.measureTextHtml)(t,o.node());return o.remove(),l}}function l(){var t=function(){if(s){var t=i(s,o);var r=(0,n.measureTextHtmlHeight)(e,t.node());return t.remove(),{width:a,label:{width:a-l,height:r+r/4}}}};var e=[];var a=300;var o=(0,r.chartOptions)().style.legend;var l=0;var s;return Object.assign(t,{texts:function(a){return arguments.length?(e=a.slice(0),t):e},width:function(e){return arguments.length?(a=e,t):a},style:function(e){return arguments.length?(o=e,t):o},reservedSize:function(e){return arguments.length?(l=e,t):l},parentContainer:function(e){return arguments.length?(s=e,t):s}}),t}},7724:(t,e,a)=>{function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}a.r(e),a.d(e,{Renderer:()=>n});var n=function(){"use strict";function t(e){if(!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,t),!e.instance)throw Error("No instance provided");this.renderables=[],this.instance=e.instance}var e,a;return e=[{key:"start",value:function(){var t=this.instance;var e=t.root;var a=e.select(".igc");var r={igc:a,grid:a.select(".igc-grid"),title:e.select(".igc-titles")};this.renderables.forEach(function(e){if("function"==typeof e){e();return}if("object"==typeof e){if(-1!==["grid","title"].indexOf(e.parent)){t.renderPart(r[e.parent],e.callable,e.className);return}if("igc"===e.parent){t.renderGraphs(r.igc,e.callable);return}t.renderPart(e.parent,e.callable,e.className)}})}},{key:"add",value:function(t){return this.renderables.push(t),t}},{key:"addGrid",value:function(t,e){var a={callable:t,className:e,parent:"grid"};return this.add(a),a}},{key:"addTitle",value:function(t,e){var a={callable:t,className:e,parent:"title"};return this.add(a),a}},{key:"addParent",value:function(t,e,a){var r={callable:e,className:a,parent:t};return this.add(r),r}},{key:"addGraph",value:function(t){var e={callable:t,parent:"igc"};return this.add(e),e}}],r(t.prototype,e),a&&r(t,a),t}()},1113:(t,e,a)=>{a.r(e),a.d(e,{createStyledTooltip:()=>c,getTooltip:()=>s,setTooltip:()=>l,tooltipDummy:()=>i});var r=a(1114);var n=a(844);var i={setText:function(){return this},setValue:function(){return this},setPosition:function(){return this},show:function(){return(0,n.logError)("Trying to show dummy tooltip"),this},interaction:function(){return this},hide:function(){return o!==i&&o.hide.apply(o,arguments),this},mute:function(){return this},unmute:function(){return this},isVisible:function(){return this},setKey:function(){return this},getKey:function(){return this}};var o=i;function l(t){o=t}function s(){return o}function c(t){var e,a,n,l,s,c,u,h;var f=t.createInteractionCaller();var v=null==t?void 0:null===(a=t.options)||void 0===a?void 0:null===(e=a.tooltip)||void 0===e?void 0:e.enabled;var d=null==t?void 0:null===(s=t.options)||void 0===s?void 0:null===(l=s.style)||void 0===l?void 0:null===(n=l.tooltip)||void 0===n?void 0:n.text;var p=null==t?void 0:null===(h=t.options)||void 0===h?void 0:null===(u=h.style)||void 0===u?void 0:null===(c=u.tooltip)||void 0===c?void 0:c.value;d=d&&(0,r.camelizeObject)(d),p=p&&(0,r.camelizeObject)(p);var g=(0,r.createGetScale)(t.root.node());var m,y;return m=d,y=p,v?function(){return{setText:function(t){return o.setText(t,m),this},setValue:function(t){return"string"!=typeof t||o.setValue(t,y),this},setPosition:function(t,e){return o.setPosition(t,{color:e,scale:g().x}),this},interaction:function(t){return f("tooltip",t),this},show:function(){return o.show.apply(o,arguments),this},hide:function(){return o.hide.apply(o,arguments),this},isVisible:function(){return o.isVisible()},mute:function(){return o.mute(),this},unmute:function(){return o.unmute(),this},setKey:function(){return o.setKey.apply(o,arguments),this},getKey:function(){return o.getKey()}}}:function(){return i}}},7843:(t,e,a)=>{a.r(e),a.d(e,{addShapesToCharts:()=>f,assignShapesToCategories:()=>v,cleanShapeName:()=>h,default:()=>d});var r=a(498);var n=a.n(r);var i=a(7844);var o=a(7741);var l=a(7742);var s=a(7750);var c=a(1987);var u=Object.assign({},o.default);function h(t){return t&&t.replace(/^[^0-9a-z]+|[^\w:.-]+/gi,"")}function f(t){var e=c.default.shapes[t];e||(t=this.defaultShape,e=c.default.shapes[t]),this.chartOptions.shapes||(this.chartOptions.shapes=[]),n().find(this.chartOptions.shapes,{title:h(t)})||this.chartOptions.shapes.push({title:h(t),shape:e.path,dimensions:e.dimensions,fillRule:e.fillRule,transform:e.transform})}function v(t){var e=t.custom,a=t.sheetIndex,r=t.sheetOptions;var i=this;var o=e.defaultPath;if(void 0!==a){var l=this.sheetSettings[a];n().has(l,"shapes")&&(e.shapes=l.shapes)}n().get(e,"shapes.length")?(e.shapes.forEach(function(t){f.call(i,t)}),r.categories.shapes=e.shapes.map(function(t){return h(t)})):(f.call(this,o),r.categories.shapes=[h(o)])}u.instanceClass=i.PictorialGrid,u.setupChartOptions=function(){o.default.setupChartOptions.call(this);var t=this.custom,e=this.chartOptions;e.series.data=!0===t.absoluteDistribution?"absolute":"separate",e.series.distribution=!1===t.roundValues?"scattered":"round",e.series.realNumbers=!0===t.realNumbers},u.setupChartSheetOptionsItem=function(t,e){var a={categories:{colors:n().merge([],this.themeColors,t.colors||this.colors)},axis:[{}]};(0,l.default)(a,t,this.charts);var r=t.iconSizeMultiplier;return a.iconSizeMultiplier=r,v.call(this,{custom:t,sheetIndex:e,sheetOptions:a}),(0,s.assignNumberFormatLabels)({sheetOptions:a,custom:t,affixes:[{id:"x",path:"",ignoreCheck:!0}],inputDecimalSeparator:this.inputDecimalSeparator}),a};let d=Object.freeze(u)},7750:(t,e,a)=>{a.r(e),a.d(e,{assignNumberFormatLabels:()=>c,assignNumberFormatValues:()=>s});var r=a(498);var n=a.n(r);var i=a(1991);var o={label:{libraryTargetPath:"labels.format",customAffixPath:"labels.graph.item.format.affix"},x:{libraryTargetPath:"tooltip.format.x",customAffixPath:"labels.tooltip.format.x.affix"},y:{libraryTargetPath:"tooltip.format.y",customAffixPath:"labels.tooltip.format.y.affix"},y2:{libraryTargetPath:"tooltip.format.y2",customAffixPath:"labels.tooltip.format.y2.affix"}};function l(t,e,a){var r=e.decimalSeparator,o=e.groupingSymbol;o&&n().set(t,"grouping","none"===o?"":o);var l=!1===r;n().set(t,"decimal",l?".,":r);var s=a?new i.default("firstNumber",a):new i.default(l?"legacy":"firstNumber",r);n().set(t,"numberParser",s)}function s(t){var e=t.sheetOptions,a=t.custom,r=t.axis,i=t.inputDecimalSeparator;var o={x:0,y:1,y2:2,x1:0,y1:1};r.forEach(function(t){var r=t.id,s=t.path;var c=s?n().get(a,s,{}):a;var h=e.axis[o[r]];n().has(h,"format")||n().set(h,"format",{});var f=h.format;if(u(f,c),!["x1","y1"].includes(r)){l(f,c,i);var v=["useSIPrefixes"];n().get(a,"axis.".concat(r,".affix"),!0)&&v.push("prefix","suffix"),v.forEach(function(t){var e=n().get(c,t);void 0!==e&&n().set(f,t,e)})}})}function c(t){var e=t.sheetOptions,a=t.custom,r=t.affixes,i=t.inputDecimalSeparator;(void 0===r?[]:r).forEach(function(t){var r=t.id,s=t.path,c=t.ignoreCheck,h=t.defaultValue;var f=o[r];var v=f.libraryTargetPath,d=f.customAffixPath;var p=s?n().get(a,s,{}):a;var g=n().pick(p,"prefix","suffix");u(g,p),l(g,p,i),c||n().get(a,d,h)||(n().unset(g,"prefix"),n().unset(g,"suffix")),n().set(e,v,g)})}function u(t,e){var a=e.decimalPlaces,r=e.decimalPlacesValue;a&&void 0!==r&&n().set(t,"decimalPlaces",r)}},7713:(t,e,a)=>{function r(t,e,a){t=+t,e=+e,a=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+a;var r=-1,n=0|Math.max(0,Math.ceil((e-t)/a)),i=Array(n);for(;++r<n;)i[r]=t+r*a;return i}a.r(e),a.d(e,{default:()=>r})}}]);