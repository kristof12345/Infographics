(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-26"],{7709:(t,e,i)=>{i.r(e),i.d(e,{Bottom:()=>c});var r=i(1117);var a=i(3851);var n=i(1115);var l=i(7710);var s=i(7712);var o=i(7711);function c(){var t=function(t){var a=[o.TEXT_ALIGN.CENTER,o.TEXT_ALIGN.RIGHT].includes(s);t.each(function(){var t=(0,r.default)(this);var h=t.selectAll(".text_tick").data(l);h.exit().remove(),(h=h.merge(h.enter().append("g").attr("class","text_tick"))).styles(i),h.each(function(t){var n=t.text,l=t.textWidths,c=t.x,h=t.y,u=t.lineHeight,v=t.maxWidth,f=t.textAnchor;var d=(0,r.default)(this);var x=n.constructor===Array;var m=d.selectAll("text").data(x?n:[n]);m.exit().remove(),(m=m.enter().append("text").merge(m)).text(function(t){return t}).attr("fill",i.color).attr("text-anchor",null),x?m.attr("x",function(t,i){var r=0;return a&&(r=(v-l[i])*(s===o.TEXT_ALIGN.CENTER?.5:1)),e.x+c+r}).attr("y",function(t,i){return e.y+h+i*u}).attr("text-anchor",f):m.attr("x",e.x+c).attr("y",e.y+h)}),h.style("opacity",n.eps).attr("transform",function(t){return t.transform?t.transform.call(e,t):null}).transition().duration(c).style("opacity",1),t.attr("height",null)})};var e={x:0,y:0,width:0,height:0};var i=(0,a.defaultTextStyle)();var l=[];var s=o.TEXT_ALIGN.CENTER;var c=700;return Object.assign(t,{bounds:function(i){return arguments.length?(Object.assign(e,i),t):e},style:function(e){return arguments.length?(i=e,t):i},data:function(e){return arguments.length?(l=e,t):l},textAlign:function(e){return arguments.length?(s=-1===Object.values(o.TEXT_ALIGN).indexOf(e)?s:e,t):s},animationDuration:function(e){return arguments.length?(c=e,t):c}})}c.createLabels=function(t,e){return(o.LAYOUT.TILTED===e?l.tilted:s.regular).call(t)}},7711:(t,e,i)=>{i.r(e),i.d(e,{ENTRY_SPACING:()=>n,LAYOUT:()=>a,TEXT_ALIGN:()=>r});var r={LEFT:1,CENTER:2,RIGHT:3};var a={REGULAR:"regular",TILTED:"tilted"};var n=0},7712:(t,e,i)=>{i.r(e),i.d(e,{chartSpecific:()=>C,createFindLeftMost:()=>y,createFindRightMost:()=>L,createTickTimeFormat:()=>E,getCategories:()=>M,getLimits:()=>O,getPositions:()=>N,getTicks:()=>I,horizontal:()=>A,lastLabelOverflow:()=>b,regular:()=>W});var r=i(498);var a=i.n(r);var n=i(7713);var l=i(1977);var s=i(7704);var o=i(3894);var c=i(3893);var h=i(7705);var u=i(7707);var v=i(7711);var f=i(7695);var d={HORIZONTAL:"horizontal",VERTICAL:"vertical"};var x=["Line","Scatter","Bubble","DotPlot","Area","AreaStacked","StreamGraph"];var m=["Column","ColumnStacked","ColumnGrouped","AreaStepped","Waterfall","BubblePlot"];var g=["ColumnLine","LineLine","Combo","ComboStacked"];function p(t){return g.includes(t)}function T(t){return x.includes(t)}function w(t){var e=t.m,i=t.indices,r=t.positions,a=t.labels,n=t.style,l=t.filterMetrics;var s=e.wrapped;var c=0;var h=i.map(function(t,i){var l=s.collection[i];var h=s.width;var u=e.baseLineOffset;if(1===s.linesFit)l=o.Text.getTrimmedText([a[i]],n,e.limit.width),c=Math.max(c,l.widths[0]);else if(l.collection.length>s.linesFit&&(l.collection=s.collection[i].collection.slice(0,s.linesFit),s.linesFit>0)){var v=s.linesFit-1;var f=o.Text.trimWithEllipsis(l.collection[v],n,e.limit.width),d=f.text,x=f.width;l.collection[v]=d,l.widths[v]=x}var m=l.collection.length*e.lineHeight;return{x:r[i]-h-.5*m,y:u,w:h,b:u,h:m,text:l.collection,textWidths:l.widths,lineHeight:e.lineHeight,maxWidth:s.width,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w;var i=this.y+t.y-t.b;return"rotate(-90 ".concat(e," ").concat(i,")")}}});h.textAlign=v.TEXT_ALIGN.RIGHT,this.runtime.reverseAxis&&(h.textAlign=v.TEXT_ALIGN.LEFT);var u={renderData:h,height:Math.max(c,s.width),layout:"regular"};return C.call(this,u,l),b.call(this,u,function(t){return t.x+t.w+t.h}),u}function y(t){return function(e){var i=e.indices,r=e.positions,a=e.m;var n={x:1/0,index:0};return i.forEach(function(e,i){var l=a.text.collection[e];var s=t(r[i],l);s<n.x&&(n.x=s,n.index=i)}),n.x===1/0&&(n.x=0),n}}function L(t){return function(e){var i=e.indices,r=e.positions,a=e.m;var n={x:-1/0,index:0};return i.forEach(function(e,i){var l=a.text.collection[e];var s=t(r[i],l);s>n.x&&(n.x=s,n.index=i)}),n}}function b(t,e){var i=this.runtime;var r=t.renderData;var n=function(t){var e;var i=-1!=(e=t.length-1)&&{firstItem:a().merge({first:!0},t[0]),lastItem:a().merge({},t[e])};if(!i)return!1;var r=i.firstItem,n=i.lastItem;return r.x>n.x?r:n}(r);if(!n)return!1;e(n)>i.width-i.igcLeftOffset&&(n.first?r.shift():r.pop())}function A(t){var e=t.m,i=t.indices,r=t.positions,a=t.labels,n=t.style,l=t.filterMetrics;var s=e.wrapped,c=e.limit;var h=[];var u;s?(h=i.map(function(t,i){var l=s.collection[i];var h=l.width;if(1===s.linesFit)l=o.Text.getTrimmedText([a[i]],n,c.width);else if(l.collection.length>s.linesFit&&(l.collection=s.collection[i].collection.slice(0,s.linesFit),s.linesFit>0)){var u=s.linesFit-1;var v=o.Text.trimWithEllipsis(l.collection[u],n,c.width),f=v.text,d=v.width;l.collection[u]=f,l.widths[u]=d}return{x:r[i]-.5*s.width,y:e.baseLineOffset,text:l.collection,textWidths:l.widths,width:h,lineHeight:e.lineHeight,maxWidth:s.width,textAnchor:null,transform:null}}),u=e.wrapped.linesFitHeight):(h=i.map(function(t,i){var l=e.text.collection[i];var s=l.width;return l=o.Text.getTrimmedText([a[i]],n,e.text.width),{x:r[i]-.5*e.text.width,y:e.baseLineOffset,text:l.collection,textWidths:l.widths,width:s,lineHeight:e.lineHeight,maxWidth:e.text.width,textAnchor:null,transform:null}}),u=e.text.height);var v={renderData:h,height:u,layout:"regular"};return C.call(this,v,l),b.call(this,v,function(t){return t.x+t.maxWidth/2}),v}function C(t,e){var i=this.runtime;var r=this.getClassName();T(r)?(t.ticks=i.numericCategories?I.call(this):null,t.filterMetrics=e):"BubblePlot"===r?t.filterMetrics=e:p(r)&&(t.filterMetrics=e)}function I(){var t=this.runtime,e=t.xAxisOptions,i=t.xScale,r=t.xTickInterval,a=t.xAxisTimeBased;var n=i.domain();var l=(0,s.ensureMinTicks)(i,r);return(0,h.hasLimits)(e)&&!a&&(l=(0,h.forceTicksToDomain)(n,l)),l}var F=["norepeat:%Y Q%q","norepeat:'%y Q%q","norepeat:Q%q %Y","norepeat:Q%q '%y"];function E(){var t,e,i,r;var a=null===this||void 0===this?void 0:null===(r=this.runtime)||void 0===r?void 0:null===(i=r.sheet)||void 0===i?void 0:null===(e=i.axis)||void 0===e?void 0:null===(t=e[0])||void 0===t?void 0:t.timeFormat;if(F.includes(a)){var n=a.replace(/^norepeat:/,"");return function t(e){var i=t;i.years||(i.years=new Set,i.quarters=new Set,i.yearQuarterFormat=(0,l.timeFormat)(n),i.quarterFormat=(0,l.timeFormat)("Q%q"),i.yearFormat=(0,l.timeFormat)("%Y"));var r=i.yearFormat(e);var a=i.quarterFormat(e);return i.years.has(r)?i.quarters.has(a)?"":(i.quarters.add(a),a):(i.years.add(r),i.quarters.clear(),i.quarters.add(a),i.yearQuarterFormat(e))}}return(0,f.createTimeFormat)(a)}function M(){var t=this.runtime;var e=a().get(t,"sheet.axis[0]");var i=this.getClassName();if(m.includes(i))return t.categoryData;if(t.xAxisTimeBased){var r=t.xScale;var n=E.call(this,r.tickFormat);return(0,s.ensureMinTicks)(r,t.xTickInterval).map(function(t){return n(t)})}if(T(i)){if(t.numericCategories){var l=I.call(this);var o=t.formatter.axis.x.createTickFormatter(l,e);return l.map(o)}return t.sheet.categories.data.slice(0)}if(p(i))return t.sheet.categories.data.slice(0);if("Gantt"===i||"Candlestick"===i){if(t.numericCategories)return t.formatter.axis.x.formatTicks(I.call(this),e);var c=t.xScale;var h=E.call(this,c.tickFormat);return(0,s.ensureMinTicks)(c,t.xTickInterval).map(function(t){return h(t)})}}function O(t){var e=this.getClassName();var i=this.runtime.limits;var r={maxCategoryWidth:i.maxCategoryWidth,maxCategoryHeight:i.maxCategoryHeight};return(T(e)||["Gantt","Candlestick","BubblePlot"].includes(e))&&(r.maxCategoryWidth=(0,u.getRangeStep)(t)-v.ENTRY_SPACING),r}function N(){var t=this.runtime;var e=this.getClassName();var i=t.xScale;var r=(0,s.getScalePositions)(i);return(t.xAxisTimeBased||T(e)&&t.numericCategories)&&(r=I.call(this).map(function(t){return i(t)})),r}function W(){var t=this.runtime,e=this.options;var i=t.bottomLabelPadding,r=t.igcLeftOffset;var a=e.style.axis.x.tick;var l=y(function(t,e){return t-e.width/2});var s=L(function(t,e){return t+e.width/2});var o=i?i.top+i.bottom:0;var h=N.call(this);var f=(0,n.default)(0,h.length);var x=M.call(this);var m={domainIndex:f};var g=O.call(this,h);var p=g.maxCategoryHeight;var T=g.maxCategoryWidth;var b=(0,c.TextMetric)().style(a);var C;if(t.xTickMetrics&&t.xTickMetrics.height*h.length>t.graphWidth){var I=(0,u.stepFromPositionsByWidth)(h,t.xTickMetrics.height);x=(m=(0,u.filterToFit)(h,x,I,-1)).domainIndex.map(function(t){return x[t]}),h=m.range,f=(0,n.default)(0,h.length),T=(0,u.getRangeStep)(h)-v.ENTRY_SPACING,b.text(x),b.limit({width:Math.max(0,T),height:p}),C=b.clear().run().out()}else if((C=b.text(x).limit({width:Math.max(0,T),height:p}).run().out()).text.height>T&&C.text.width>T){var F=(0,u.stepFromPositionsByWidth)(h,C.text.height+v.ENTRY_SPACING);x=(m=(0,u.filterToFit)(h,x,F,-1)).domainIndex.map(function(t){return x[t]}),h=m.range,f=(0,n.default)(0,h.length),T=(0,u.getRangeStep)(h)-v.ENTRY_SPACING,b.text(x),b.props.limit.width=T,C=b.clear().run().out()}b.props.limit.width=p,b.props.limit.height=T;var E=b.clear().run().out();if(C.text.width<T)return l({indices:f,positions:h,m:C}).x<-r||s({indices:f,positions:h,m:C}).x>t.width-t.igcLeftOffset?w.call(this,{m:E,indices:f,positions:h,labels:x,style:a,filterMetrics:m}):A.call(this,{m:C,indices:f,positions:h,labels:x,style:a,filterMetrics:m});if(C.text.width+o<p)return w.call(this,{m:E,indices:f,positions:h,labels:x,style:a,filterMetrics:m});var W=p>T;var k=d.HORIZONTAL;return(W&&(k=E.wrapped.fits?d.VERTICAL:C.wrapped.fits&&E.wrapped.linesFit>1?d.HORIZONTAL:d.VERTICAL),d.VERTICAL===k)?w.call(this,{m:E,indices:f,positions:h,labels:x,style:a,filterMetrics:m}):A.call(this,{m:C,indices:f,positions:h,labels:x,style:a,filterMetrics:m})}},7710:(t,e,i)=>{i.r(e),i.d(e,{tilted:()=>f});var r=i(498);var a=i.n(r);var n=i(7713);var l=i(7714);var s=i(3893);var o=i(3894);var c=i(7707);var h=i(1115);var u=i(7711);var v=i(7712);function f(){var t=this.runtime,e=this.options;var i=t.xScale,r=t.sheet;var f=e.style.axis.x.tick;var d=Math.sqrt(2);var x=!!(r.grid&&r.grid.reverse);var m=a().get(t,"layout.marginAxis.left",0);var g=t.spacing.maxBeforeXAxisTick*(m>0?1:2);var p=t.xScaleResize;var T=g;p||(p="function"==typeof i.rangeBands?function(t,e){t.rangeBands(e,0)}:function(t,e){t.range(e)});var w=v.getPositions.call(this);var y=(0,n.default)(0,w.length);var L=v.getCategories.call(this);var b=w;var A=L;var C=v.getLimits.call(this,w);var I=C.maxCategoryWidth,F=C.maxCategoryHeight;var E=(0,v.createFindLeftMost)(function(t,e){var i=e.width,r=e.height,a=e.baseLineOffset;return h.math.round(t-(i+(r-a))*h.vect45,6)});var M=(0,s.TextMetric)().style(f).text(L);var O=M.run().out();var N=O.lineHeight,W=O.baseLineOffset;var k=N>I&&O.text.width>I;var R={domainIndex:y};var S=0;var G;var H=function(t){L=(R=(0,c.filterToFit)(b,A,t,-1)).domainIndex.map(function(t){return A[t]}),w=R.range,y=R.domainIndex};var P=function(){p(i,[0,t.graphWidth]),w=v.getPositions.call(this);var e=(0,c.stepFromPositionsByWidth)(w,N+u.ENTRY_SPACING);e>0&&e>S?(H(e),S=e):w=y.map(function(t){return w[t]}),G=E({indices:y,positions:w,m:O})};var _=function(t){return(t-N*h.vect45)*d};var B;k?(H(S=(0,c.stepFromPositionsByWidth)(b,N+u.ENTRY_SPACING)),B=M.text(L).clear().run().out()):B=M.limit({width:Math.max(0,I),height:F}).run().out();var q=-t.igcLeftOffset;var Y;if(G=E({indices:(0,n.default)(0,w.length),positions:w,m:B}),B.text.width<=I&&G.x>q)return v.horizontal.call(this,{m:B,indices:y,positions:w,labels:L,style:f,filterMetrics:R});var D=I>=F;var X=I>=100;if((D||X)&&a().get(B,"wrapped.fits",!1))return v.horizontal.call(this,{m:B,indices:y,positions:w,labels:L,style:f,filterMetrics:R});if(X&&!B.wrapped.fits){(function(e){return 0!==T&&0!==e&&(T-=e,t.igcLeftOffset+=e,t.graphWidth-=e,t.margin.left+=e,P.call(this),!0)}).call(this,g);var Q=(Math.min(t.igcLeftOffset+w[G.index]+W*h.vect45,F)-N*h.vect45)*d;var z;var V;var j;var U;var Z=(z=B.wrapped,V=0,j=0,U=z.linesFit,z.collection.forEach(function(t){var e=t.length;if(e>V)V=e,j=(0,l.default)(t.widths.slice(0,U));else if(0!==e&&e===V){var i=(0,l.default)(t.widths.slice(0,U));i>j&&(j=i)}}),j);if(T=g,t.igcLeftOffset-=g,t.graphWidth+=g,t.margin.left-=g,p(i,[0,t.graphWidth]),H(S=k?(0,c.stepFromPositionsByWidth)(b,N+u.ENTRY_SPACING):0),Z>=Q)return B=M.text(L).clear().run().out(),v.horizontal.call(this,{m:B,indices:y,positions:w,labels:L,style:f,filterMetrics:R})}var J;if((G=E({indices:y,positions:w,m:O})).x<q){var K=[];var $=S;var tt=t.igcLeftOffset;var te=t.graphWidth;var ti=t.margin.left;var tr=t.igcLeftOffset+w[G.index];for(var ta=1;ta<=g;ta++){t.igcLeftOffset=tt+ta,t.graphWidth=te-ta,t.margin.left=ti+ta,P.call(this);var tn=t.igcLeftOffset+w[G.index];if($!==S){H(S=0);break}K.push({diff:ta,width:tn})}var tl=O.text.width;var ts=tl-_(tr);var to=K.reduce(function(t,e){var i=tl-_(e.width);return Math.abs(ts)>Math.abs(i)?ts<=0&&i>0?t:(ts=i,e):t},{diff:0,position:tr}).diff;t.igcLeftOffset=tt+to,t.graphWidth=te-to,t.margin.left=ti+to,P.call(this),J=((J=Math.min(F,Math.floor(w[G.index]+t.igcLeftOffset)))-N*h.vect45)*d;var tc=o.Text.getTrimmedText(L,f,J);var th=M.text(tc.collection).clear().run().out();var tu=((J=th.text.width)+th.text.height)*h.vect45;t.igcLeftOffset=Math.round(t.igcLeftOffset),t.graphWidth=Math.round(t.graphWidth),t.margin.left=Math.round(t.margin.left),Y=y.map(function(t,e){var i=th.text.width;var r=th.text.collection[e].height;var a=th.text.collection[e].baseLineOffset;return{x:w[e]-i-(r-a),y:x?tu:a,w:i,b:a,h:r,text:[tc.collection[e]],textWidths:[tc.widths[e]],lineHeight:N,maxWidth:i,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w;var i=this.y+t.y-t.b;var r=-45;return x&&(r=45,i+=t.h),"rotate(".concat(r," ").concat(e," ").concat(i,")")}}})}else{J=(O.text.height+O.text.width)*h.vect45>F?(F-N*h.vect45)*d:O.text.width;var tv=o.Text.getTrimmedText(L,f,J);var tf=M.text(tv.collection).clear().run().out();var td=((J=tf.text.width)+tf.text.height)*h.vect45;Y=y.map(function(t,e){var i=tf.text.width;var r=tf.text.collection[e].height;var a=tf.text.collection[e].baseLineOffset;return{x:w[e]-i-(r-a),y:x?td:a,w:i,b:a,h:r,text:[tv.collection[e]],textWidths:[tv.widths[e]],lineHeight:N,maxWidth:i,textAnchor:null,transform:function(t){var e=this.x+t.x+t.w;var i=this.y+t.y-t.b;var r=-45;return x&&(r=45,i+=t.h),"rotate(".concat(r," ").concat(e," ").concat(i,")")}}})}Y.textAlign=u.TEXT_ALIGN.RIGHT;var tx={renderData:Y,height:Math.ceil((J+N)*h.vect45),layout:"tilted"};return v.chartSpecific.call(this,tx,R),v.lastLabelOverflow.call(this,tx,function(t){return t.x+t.w+t.b*h.vect45}),tx}}}]);