(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-45"],{7854:(t,e,r)=>{r.r(e),r.d(e,{LeftStart:()=>c});var n=r(3876);var a=r(7739);var i=r(1117);var o=r(1115);var l=r(1114);var u=r(3851);var s=r(7756);function c(){var t=function(t){t.each(function(){var t=(0,i.default)(this);t.attr("transform","translate(".concat(c.left,", ").concat(c.top,")"));var n=e.copy();var a=r.domain().map(function(t){return{y:n(t),d:r(t)}}).filter(function(t){return void 0!==t.d});var u=(0,l.getAllTextDimensions)(a.map(function(t){return t.d}),f);var v=[];t.selectAll(".tick").each(function(t){return v.push(t)}),g&&(g=!(0,l.compare)(v,a,function(t,e){return t.d===e.d}));var m=t.selectAll(".tick").data(a);m.exit().remove(),(m=m.enter().append("g").attr("class","tick").merge(m)).selectAll("text").remove(),m.styles(f).style("opacity",o.eps),(0,s.trimMultiline)({tick:m,bounds:h,padding:d,textDimArr:u,scale1:n,style:f,afterWrap:function(t){t.selectAll("text").attr("text-anchor","start")}}),p&&(g?p(t.selectAll(".tick").transition()):t.selectAll(".tick").call(p))})};var e=(0,n.default)();var r=(0,a.default)();var c={left:0,top:0};var h={width:0,height:0};var d={top:0,right:0,bottom:0,left:0};var f=(0,u.defaultTextStyle)();var v=!1;var p=function(t){t.style("opacity",1)};var g=!0;return Object.assign(t,{scale:function(r){return arguments.length?(e=r,t):e},scaleData:function(e){return arguments.length?(r=e,t):r},offset:function(e){return arguments.length?(c.left="number"==typeof e.left?e.left:c.left,c.top="number"==typeof e.top?e.top:c.top,t):c},bounds:function(e){return arguments.length?(h.width="number"==typeof e.width?e.width:h.width,h.height="number"==typeof e.height?e.height:h.height,t):h},style:function(e){return arguments.length?(f=e,t):f},padding:function(e){return arguments.length?(d.top="number"==typeof e.top?e.top:d.top,d.right="number"==typeof e.right?e.right:d.right,d.bottom="number"==typeof e.bottom?e.bottom:d.bottom,d.left="number"==typeof e.left?e.left:d.left,t):d},drawSeparators:function(e){return arguments.length?(v=!!e,t):v},transition:function(e){return arguments.length?(p=e,t):p},animate:function(e){return arguments.length&&(g=e),t}}),t}},7853:(t,e,r)=>{r.r(e),r.d(e,{Pyramid:()=>O});var n=r(498);var a=r.n(n);var i=r(3906);var o=r(7739);var l=r(7738);var u=r(3876);var s=r(3862);var c=r(3807);var h=r(3911);var d=r(3912);var f=r(1114);var v=r(7854);var p=r(7724);var g=r(3903);var m=r(3900);var y=r(1113);var b=r(3909);var x=r(3861);var w=r(7855);function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r||t):a.value}})(t,e,r||t)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,x.putGraph)("pyramid",w.Pyramid);var O=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(n,t);var r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=D(n),r;if(e){var a=D(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);var i;return(i=r)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function n(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),r.apply(this,arguments)}var c,x;return x=[{key:"getClassName",value:function(){return"Pyramid"}}],c=[{key:"render",value:function(){this.detectDimensions();var t=this.options,e=this.root;t.fixedHeight=!0;var r=this.getSheetData();var n=(0,d.formatHelper)(r);var a=this.runtime={width:t.width,height:t.height,inanimate:(0,h.inanimated)(t),sheet:r,formatter:n};var i=a.data=this.prepareSheetData(r);if((0,m.Controls)(this,{width:t.width}),(0,b.DownloadButton)(this,t.style.legend),(0,g.legendHelper)({instance:this}),!this.sheetsNotFound()){var o=r.pyramid,l=o.direction,u=o.showText;return this.categories=i.map(function(t){return t.label}),"up"===l&&this.categories.reverse(),this.renderSideLabels=!r.legend.enabled&&a.width>300&&u,this.layout=this.getLayout(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.renderSideLabels?(this.gridLines=this.getGridLines(),this.labels=this.getLabels()):(this.gridLines&&(e.selectAll(".igc-ygrid").remove(),delete this.gridLines),this.labels&&(e.selectAll(".igc-ylabels").remove(),delete this.labels)),this.renderTransitions()}}},{key:"getLabels",value:function(){var t=this.layout,e=this.options,r=this.yScale,n=this.runtime;var i=r.bandwidth();return(0,v.LeftStart)().scale(r).scaleData((0,o.default)(this.categories).domain(this.getYDomain())).bounds({width:t.labelWidth,height:i}).animate(!n.inanimate).style(a().extend({"text-anchor":"start"},e.style.graph.item.name))}},{key:"getLayout",value:function(){var t=this.runtime,e=this.options;var r=t.width,n=t.height;var a,o;this.renderSideLabels&&(a=(0,f.getAllTextDimensions)(this.categories,e.style.graph.item.name),o=Math.min((0,i.default)(a.collection.map(function(t){return t.width})),.33*r));var l={top:0,bottom:0,left:this.renderSideLabels?o+10:0,right:0};return{margins:l,labelWidth:o,labelDimensions:a,graph:{width:r-l.left-l.right,height:n-l.top-l.bottom},chart:{width:r,height:n}}}},{key:"getYScale",value:function(){var t=this.layout.margins;return(0,l.default)().rangeRound([t.top,this.runtime.height]).domain(this.getYDomain())}},{key:"getXScale",value:function(){var t=this.runtime,e=this.layout;var r=t.sheet;var n=e.margins,a=e.graph,i=e.chart;var o=[n.left+a.width/2,i.width-n.right];return r.pyramid.regularEdge?(0,l.point)().rangeRound(o).domain(this.getXDomain()):(0,u.default)().rangeRound(o).domain(this.getXDomain())}},{key:"getGridLines",value:function(){var t=this.yScale,e=this.xScale,r=this.options,n=this.runtime;var a=e(0);return function(e){var i=function(e,r){var n=e?t(e):t(l[r-1])+t.bandwidth();return n>1&&(n-=1),n};var o=e.selectAll(".tick");var l=t.domain().concat([0]);var u=!n.inanimate;var s=o.data(l);s.transition().duration(0),o.size()&&o.size()===l.length&&(u=!1),s.exit().remove(),(s=s.enter().append("line").merge(s)).styles({stroke:r.style.grid.color,"shape-rendering":"crispEdges",opacity:u?0:.25}).attrs({x1:0,y1:i,x2:a,y2:i,class:"tick"}),u&&s.transition().duration(r.animation.duration).style("opacity",.25)}}},{key:"getYDomain",value:function(){var t=this.runtime,e=t.sheet;var r=t.data.map(function(t){return t.index});return"up"===e.pyramid.direction&&r.reverse(),r}},{key:"getXDomain",value:function(){var t=this.runtime,e=t.sheet,r=t.data;return e.pyramid.regularEdge?[0].concat(r.map(function(t){return t.index}).reverse()):[0,(0,i.default)(e.series[0].data)]}},{key:"renderTransitions",value:function(){var t=this;var e=this.options,r=this.root,n=this.runtime;var a=n.data;var i=new p.Renderer({instance:this});var o=this.createAnimationCounter(2);this.containerSetup(),i.add(function(){r.attr("width",n.width).attr("height",n.height).transition().ease(s[e.animation.ease]).duration(e.animation.duration).on("start",function(){t.events.call("startAnimation")}).on("end",function(){o()})}),this.gridLines&&i.addGrid(this.gridLines,"igc-ygrid"),this.labels&&i.addGrid(this.labels,"igc-ylabels"),i.addGraph([{graphs:[{type:"pyramid",data:a,animationEnd:o}]}]),i.start()}},{key:"graphInstanceSetup",value:function(t,e,r){var n=this.runtime,a=this.options;var i=n.sheet,o=n.inanimate,l=n.formatter;var u=i.pyramid;t.setup({xScale:this.xScale,yScale:this.yScale,transitionDuration:o?0:500,zeroEnding:"asis"!==u.endType,regularEdge:u.regularEdge,direction:u.direction,singleColor:u.singleColor,showValues:u.showValues,textStyle:a.style.graph.item.value,tooltipText:function(t){return t.label},tooltipValue:function(t){return l.tooltip.x.format(t.rawValue)}}).animate(!o).tooltip((0,y.createStyledTooltip)(this)).alpha(this.options.opacity).labelFormat(l.labels).data(e.data).groupId(r),t.dispatch().on("animationEnd",e.animationEnd)}},{key:"emptySheetData",value:function(){return a().merge(k(D(n.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pyramid"}],categories:{},pyramid:{showValues:!1,showText:!0,regularEdge:!0,endType:"zero",direction:"up"},legend:{enabled:!1}})}},{key:"prepareSheetData",value:function(t){var e=t.series[0];var r=t.categories.colors;var n=t.categories.data;var i=(0,g.createLegendData)(this);return e.data.reduce(function(t,o,l){var u=(0,f.replaceBlank)(o,null);if(null===u)return t;var s=(0,f.replaceBlank)(n[l]);var c=(0,f.getColor)(l,r);return i({title:s,color:c,groupId:l}).active&&t.push({value:u,label:s,color:c,rawValue:e.rawData[l],link:a().get(e,"links[".concat(l,"]"),null),index:l+1}),t},[])}},{key:"applySheetOptions",value:function(t){this.options.sheets.forEach(function(e,r){var n=t[r+1]||t[0];a().merge(e.categories,n.categories),a().merge(e.pyramid,n.pyramid),a().merge(e.legend,n.legend),n.tooltip&&(e.tooltip=e.tooltip||{},a().merge(e.tooltip,n.tooltip)),n.labels&&(e.labels=e.labels||{},a().merge(e.labels,n.labels)),n.axis&&(e.axis||(e.axis=[{}]),a().merge(e.axis[0],n.axis[0]))})}}],S(n.prototype,c),x&&S(n,x),n}(c.Chart)},7855:(t,e,r)=>{r.r(e),r.d(e,{Pyramid:()=>p});var n=r(498);var a=r.n(n);var i=r(420);var o=r(1117);var l=r(7728);var u=r(7856);var s=r(3871);var c=r(1114);var h=r(3905);var d=r(1113);var f=r(7719);var v=r(1998);function p(){var t=function(t,e){var r=D.xScale,n=D.yScale,a=D.regularEdge;var i="up"===D.direction;var o=r(t[a?"index":"value"]);var l=n(t.index);var u=n.bandwidth();var s=r(0);var c=i?l:l+u;var h=S[e+1];var d={top:{},bottom:{}};if(i&&(l+=u),D.singleColor&&(i?c+=2:e&&(l+=2)),h){var f=r(h[a?"index":"value"]);d.top={right:{x:f,y:c},left:{x:2*s-f,y:c}}}else D.zeroEnding?d.top.left=d.top.right={x:s,y:c}:d.top={right:{x:o,y:c},left:{x:2*s-o,y:c}};return d.bottom={left:{x:2*s-o,y:l},right:{x:o,y:l}},d.bottom.width=d.bottom.right.x-d.bottom.left.x,d.top.width=d.top.right.x-d.top.left.x,d.height=u,d.top.width<3&&h&&(d.top.left.x=s-1.5,d.top.right.x=s+1.5,d.top.width=3),d.bottom.width<3&&(d.bottom.left.x=s-1.5,d.bottom.right.x=s+1.5,d.bottom.width=3),d};var e=function(t){return t.index};var r=function(t){var e=D.xScale(0);return A(n(t).map(function(t){return Object({x:e,y:t.y})}))};var n=function(t){var e=t.top,r=t.bottom;return[e.left,e.right,r.right,r.left]};var p=function(t,e){return t.select(function(){return this.getAttribute("class")===e?this:null})};var g=function(){if(!S.length){R.call("animationEnd");return}var n=S.map(t);var a=(0,o.default)(this);var i=a.selectAll("path");var l=i.data(S,e);var u=l.enter().append("path").attrs({d:function(t,e){return r(n[e])},fill:function(t){return(0,v.rgb)(t.color).toString()},class:T?"entering":"entered"});l.exit().remove(),l=u.merge(l),i.transition().duration(0);var c=p(l,"entering");var d=p(l,"entered");var f=c.size();var g=d.size();function b(){--f<1&&x()}function x(){var t=y(a,n);(0,h.addMouseEvents)(l,R,L,D.tooltipText,D.tooltipValue),t&&t.size()&&(0,h.addMouseEvents)(t,R,L,D.tooltipText,D.tooltipValue)}function w(){var t=D.transitionDuration;f?c.transition().duration(t).ease(s.elasticOut).delay(function(t,e){return 50*e}).attrs(m(n)).on("end",b):x()}g?d.transition().duration(D.transitionDuration).attrs(m(n)).on("end",function(){--g<1&&w()}):w(),y(a,n)};var m=function(t){return{fill:function(t){return(0,v.rgb)(t.color).toString()},opacity:O,d:function(e,r){return A(n(t[r]))},class:"entered"}};var y=function(t,r){var n=function(t){return k?k.format(t.rawValue):t.rawValue};var a=D.yScale,i=D.xScale;var o=(0,c.getAllTextDimensions)(S.map(n),D.textStyle);var l=a.bandwidth();var u=D.showValues&&Math.abs(l)>o.height;var s=l/2;if(!u){t.selectAll("text").remove(),V();return}var h=(0,f.createLabel)(t,S.map(function(t,e){var n=o.collection[e];var l=r[e],u=l.top,c=l.bottom;var h=(u.width+c.width)/2;var d=h>n.width+5;var f=i(0);return d||(f+=(h=(Math.abs(u.width)+Math.abs(c.width))/2)/2+5+n.width/2),{inside:d,anchor:d?"middle":"left",textX:f,textY:a(t.index)+s,index:t.index,color:t.color,label:t.label,textAnchor:"middle",rawValue:t.rawValue}}),D.textStyle,e);return 0===h.size()&&V(),h.attr("dominant-baseline","central").transition().duration(D.transitionDuration).style("opacity",1).on("start",function(){E++}).on("end",function(){0==--E&&V()}),(0,f.addOutline)(h,D.textStyle,n),h};var b=function(t){t.each(g)};var x;var w;var S;var k;var D={};var E=0;var O=1;var A=(0,l.default)().x(function(t){return t.x}).y(function(t){return t.y}).curve(u.default);var L=d.getTooltip;var T=!0;var R=(0,i.default)("animationEnd","openUrl");var V=a().after(2,function(){R.call("animationEnd")});return Object.assign(b,{groupId:function(t){return arguments.length?(w=t,b):w},chartId:function(t){return arguments.length?(x=t,b):x},setup:function(t){return arguments.length?(D=a().extend(t),b):D},tooltip:function(t){return arguments.length?(L=t,b):L},alpha:function(t){return arguments.length?(O=t,b):O},labelFormat:function(t){return arguments.length?(k=t,b):k},data:function(t){return arguments.length?(S=t,b):S},dispatch:function(){return R},animate:function(t){return arguments.length&&(T=t),b}}),b}}}]);