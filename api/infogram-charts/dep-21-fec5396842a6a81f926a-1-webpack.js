(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-21"],{3905:(e,t,n)=>{n.r(t),n.d(t,{addMouseEvents:()=>a,strokeDasharray:()=>i});var r=n(1114);function a(e,t,n,a,i){e.classed("igc-chart-link",function(e){return!!(e&&e.link)}).on("mouseover",function(){return n().interaction("show")}).on("mousemove",function(e,t){var o=(0,r.getMousePosition)(e);var l=a(t);var c=i(t);n().setText(l).setValue(c).setPosition(o,t.color)}).on("mouseout",function(){return n().hide()}).on("click",function(e,n){return t.call("openUrl",null,n.link)})}function i(e,t){return({dashed:"".concat(2*t,", ").concat(t),dotted:"".concat(t,", ").concat(t)})[e]||null}},3903:(e,t,n)=>{n.r(t),n.d(t,{createLegendData:()=>d,createLegendFilter:()=>v,createLegendFilterOpacity:()=>g,createListenToLegend:()=>h,legendFiltered:()=>u,legendHelper:()=>s});var r=n(498);var a=n.n(r);var i=n(420);var o=n(3863);var l=n(3904);var c=n(3893);function s(e){var t=e.instance,n=e.creator,r=e.data,o=e.attachEvents,s=e.sizeLimit;var d=t.options,u=t.runtime,v=t.content;var g=d.fixedHeight,h=d.width,f=d.height;var p=u.sheet.legend,y=p.enabled,b=p.position;var m,O;var x;var k,w,I,L,P,S;var j;var M;var E;var D=(m=t.options,O=t.runtime,x=m.width,w=(k=O.sheet.legend).align,I=k.position,L=k.sizing,P=k.layouts,S=k.icon,j=["left","right"].includes(I),M=a().merge({},P.common,P[I]).legend,{width:j?(E=.3,L.some(function(e){if(e[0]>=x)return E=e[1],!0}),Math.floor(x*E)):x,side:j,position:I,align:w,legend:M,icon:S});var C=D.side;var H=y&&!C&&g;var T;if(v.select(".igc-legend").remove(),y){var N;t.sheetPlayerNode&&(N=".igc-sheet-player"),-1!==["top","left"].indexOf(b)&&(N=".igc-root");var z=v.insert("div",N).attr("class","igc-legend");var A;var W,F,B;var R,_;var G;if(H&&z.style("visibility","hidden"),v.classed("igc-content-columns",C),C&&(u.width=h-D.width),T=n&&n({instance:t,data:r,layout:D})||(W=(A={instance:t,data:r,layout:D}).instance,F=A.data,B=A.layout,F=F||Object.values(W.legendData||{}),B.side&&["ColumnStacked","AreaStacked","ComboStacked"].includes(W.getClassName())&&F.reverse(),R=W.options,_=W.chartId,G=R.style.legend,(0,l.Legend)(W).data(F).style(G).chartId(_).layout(B)),(void 0===o?function(e,t){var n=this;var r=(0,i.default)("legendClick");var a=e.legendData;r.on("legendClick",function(t,r){if(a||n.chartId===r){var i=Object.values(a);var o=i.length;var l=i.filter(function(e){return!1===e.active}).length;var c=!a[t].active;(o-l>1||!0===c)&&(a[t].active=c,e.render())}}),t.addListener({id:e.chartId,dispatch:r})}:o)(t,T),z.call(T),C&&!n){var U=z.select(".igc-legend-alignContainer");var V=Math.floor(z.node().offsetWidth-U.node().offsetWidth);V>1&&(u.width+=V,z.style("width","".concat(D.width-V,"px")))}if(H){var q=(0,c.outerHeight)(z.node());(void 0===s||s)&&q>.5*f?(z.remove(),T=void 0):(u.height-=q,z.style("visibility",null))}return T}}function d(e){var t=e.legendData;return t||(t=e.legendData={}),function(e){return("string"==typeof e.title&&(e.title=e.title.trim()),void 0===t[e.groupId])?(e.active=!0,t[e.groupId]=e,e):(a().merge(t[e.groupId],e),t[e.groupId])}}function u(e){var t=e.legendData;return Object.values(void 0===t?{}:t).some(function(e){return!1===e.active})}function v(e){var t=e.groupId,n=e.matchProperty;return function(e){return e[n]!==t}}function g(e){var t=e.groupId,n=e.matchProperty;return function(e){return e[n]===t}}function h(e){var t=e.ns,n=e.easing,r=void 0===n?o.linear:n,a=e.opacity,i=e.dispatch,l=e.matchProperty,c=void 0===l?"seriesIdx":l,s=e.highlight,d=e.alpha;var u;var h;var f;var p;return s=s||(h=.3*(u=void 0===d?1:d),f=u,p=v,a&&(h=u,f=a,p=g),{start:function(e){e.style("opacity",h)},end:function(e){e.style("opacity",f)},createFilter:p}),function(e){i.on("highlightStart.".concat(t),function(t){e.filter(s.createFilter({groupId:t,matchProperty:c})).transition().duration(150).ease(r).call(s.start)}),i.on("highlightEnd.".concat(t),function(t){e.filter(s.createFilter({groupId:t,matchProperty:c})).transition().duration(150).ease(r).call(s.end)})}}},3904:(e,t,n)=>{n.r(t),n.d(t,{LEGEND_POSITION:()=>g,Layout:()=>h,Legend:()=>k});var r=n(498);var a=n.n(r);var i=n(3906);var o=n(1117);var l=n(3894);var c=n(1114);var s=n(1998);var d=n(3905);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};var r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function v(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var g={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"};var h={COLUMN:"column",ROW:"row"};var f={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"};var p=18/13;function y(e){var t=e.lineHeight,n=e.availableHeight,r=e.metricNodes;var a=r.length;var i=r.map(function(e){return Math.max(t,e.childNodes.length*t)});var o=Array(a).fill(0);var l=0;var c=[];var s=c.length;for(;n>0&&s<a&&n>=t;){var d=i[l]-o[l];c[l]||(d>=t?(o[l]+=t,n-=t):(c[l]=!0,s=c.filter(function(e){return!0===e}).length)),l=++l%a}return o}function b(e,t){var n=0;return t.forEach(function(t){n+=parseInt(a().get(e,t,0),10)}),n}function m(e,t){return["entry","entry.icon","entry.label"].reduce(function(n,r){return n+b(a().get(e,r,{}),t)},0+b(e,t))}function O(e){return a().get(e,"active",!0)}function x(e){var t=e.metricsNode,n=e.height,r=e.lineHeight;var a=(0,o.default)(t).selectAll("span").nodes();var i=a.slice(0,n/r);var l=i.length-1;return{lines:i,ellipsis:l>-1&&a.length-1>l}}function k(e){var t=function(e){return N.height>=e.node().offsetHeight};var n=function(e){return(0,i.default)(e.nodes(),function(e){return e.offsetWidth})};var r=function(r){var i=e.container.append("div").styles({visbility:"hidden",position:"absolute",width:"5000px"});var s=i.append("span").styles(S);var d=["B","X","M","W",l.ELLIPSIS].reduce(function(e,t){return s.text(t),Math.max(e,s.node().offsetWidth)},0);s.remove();var h=Math.max(d,Math.floor(w-E));var f=r.selectAll(".igc-legend-entry");var p=f.selectAll(".igc-legend-label");var b=!1;p.style("max-width",null);var O=m(M,["margin-top","margin-bottom"]);var k=a().once(function(){O=5,M=v(u({},M),{"margin-top":"".concat(O,"px"),"margin-bottom":"0px"}),f.styles(M),b=!0});0===O&&k(),p.text("");var I=p.append("span").styles(S).text(function(e){return e.title});var L=n(I);var j=I.nodes();var D=N.height;var H=r.select(".igc-legend-alignContainer");var T=t(H);var z=L<=h;if(T&&z||(T||(k(),L=n(I),T=t(H)),T&&z)){i.remove();return}var A=O*(g.length-1);p.style("width","".concat(h,"px"));var W=parseInt(window.getComputedStyle(p.node()).getPropertyValue("line-height"),10);var F=i.selectAll(".texts").data(g).enter().append("div").styles(S);F.each(function(){l.Text.wrapText((0,o.default)(this),h,W,!0,"title")});var B=F.nodes();var R=y({lineHeight:W,availableHeight:D-A,metricNodes:B});var _=R.indexOf(0);var G=-1!==_;if(G&&!b&&(k(),G=-1!==(_=(R=y({lineHeight:W,availableHeight:D-(A=O*(g.length-1)),metricNodes:B})).indexOf(0))),!b&&R.some(function(e,t){return x({metricsNode:B[t],height:e,lineHeight:W}).ellipsis})&&(k(),G=-1!==(_=(R=y({lineHeight:W,availableHeight:D-(A=O*(g.length-1)),metricNodes:B})).indexOf(0))),G){var U=R.slice(_,R.length).length;var V=D-A-R.reduce(function(e,t){return e+t},0)+O*U;var q=U;var X=W+O;for(var J=_,K=J+(Math.floor(V/X)-1);J<K;J++)R[J]+=W,q--;if(V<X){var Q=Math.max(0,_-1);R[Q]-=W,0===R[Q]&&q++}var Y=H.append("div").attr("class","igc-legend-entry").styles(M);Y.append("span").attr("class","igc-legend-ico").classed("igc-legend-ico-hint",!0).styles(v(u({},(0,c.kebabizeObject)(a().get(P,"entry.icon"))),{"border-color":C.toString()})),Y.append("span").attr("class","igc-legend-label").styles((0,c.kebabizeObject)(a().get(P,"entry.label"))).styles(S).style("width","".concat(h,"px")).text("".concat(q).concat(l.ELLIPSIS))}R.forEach(function(e,t){var n=j[t];0===e&&(0,o.default)(n.parentNode.parentNode).remove();var r=x({metricsNode:B[t],height:e,lineHeight:W});r.ellipsis&&function(e,t){var n=(0,o.default)(e);var r=n.text();if(n.text("".concat(r).concat(l.ELLIPSIS)),!(e.offsetWidth<t)){var a=r.length;for(;a-- >0;){if(n.text("".concat(r.substr(0,a)).concat(l.ELLIPSIS)),e.offsetWidth<t)return;if(0===a){n.text("");return}}}}(r.lines[r.lines.length-1],h);var a=r.lines.map(function(e){return(0,o.default)(e).text()}).join(" ");(0,o.default)(n).text(""===a?"\xa0":a)}),i.remove()};var g=[];var h={};var b=1;var k={};var w=300;var I=!1;var L=f.TOP;var P={};var S;var j;var M;var E=0;var D;var C;var H="";var T=e.interaction,N=e.runtime;function z(e){D=e,E=m(P,["marginLeft","marginRight","width"]),S=a().pick(h,["font-size","font-weight","font-family","font-style"]),e.classed("align-middle",I&&f.MIDDLE===L),e.classed("align-bottom",I&&f.BOTTOM===L),j=a().omit(P,["entry"]),e.styles((0,c.kebabizeObject)(j)),e.style("text-align",w<150?"left":"center"),e.style("width","".concat(w,"px")),!I&&w>=150&&e.style("text-align",L);var t=e.select(".igc-legend-alignContainer");var n=(t=t.size()?t:e.append("div").attr("class","igc-legend-alignContainer")).selectAll(".igc-legend-entry").data(g);n.exit().remove();var i=n.enter().append("div").attr("class","igc-legend-entry").attr("tabindex","0");i.append("span").attr("class","igc-legend-ico"),i.append("span").attr("class","igc-legend-label");var l=a().get(h,"color.label");C=(0,s.rgb)(l.active);var u=(0,s.rgb)(l.hover);var v=(0,s.rgb)(l.inactive);var y=(0,s.rgb)(a().get(h,"color.icon.inactive"));(n=n.merge(i)).on("mouseover focus",function(e,t){(0,o.default)(this).select(".igc-legend-label").style("color",u.toString()),O(t)&&(z.sendListeners(t.groupId,b,"highlightStart"),T("legend","hover"))}).on("mouseout blur",function(e,t){(0,o.default)(this).select(".igc-legend-label").style("color",function(e){return(e.active?C:v).toString()}),O(t)&&z.sendListeners(t.groupId,b,"highlightEnd")}).on("click keypress",function(e,t){("keypress"!==e.type||13===e.keyCode)&&(z.sendListeners(t.groupId,b,"legendClick"),T("legend","click"))}),n.style("max-width","".concat(w,"px")),M=(0,c.kebabizeObject)(a().omit(a().get(P,"entry"),["icon","label"])),"right"===L&&(M["margin-left"]=h["font-size"]),n.styles(M);var x=e.selectAll(".igc-legend-ico").data(g);switch(x.styles((0,c.kebabizeObject)(a().get(P,"entry.icon"))),H){case"square":x.style("border-radius",0);break;case"circle":x.style("border-radius","50%");break;case"line":var k,N;var A=parseInt(null===(N=P)||void 0===N?void 0:null===(k=N.entry)||void 0===k?void 0:k.icon.width,10);var W=A*p;var F=W/6;x.styles({width:"".concat(W,"px"),"border-radius":0,background:"transparent",position:"relative"});var B=x.append("svg");B.styles({width:"".concat(W,"px"),height:F,position:"absolute",top:"".concat((A-F)/2,"px"),left:0}),B.append("path").attr("d","M0,".concat(F/2," l").concat(W,",0")).styles({stroke:function(e){return e.active?e.color:y.toString()},"stroke-width":F,"stroke-dasharray":function(e){return(0,d.strokeDasharray)(e.strokeStyle,F)}})}"line"!==H&&x.style("background-color",function(e){return e.active?e.color:y.toString()});var R=e.selectAll(".igc-legend-label").data(g);R.styles((0,c.kebabizeObject)(a().get(P,"entry.label"))),R.text(function(e){return e.title}).styles(S).style("color",function(e){return(e.active?C:v).toString()}).style("max-width","".concat(Math.max(0,w-E),"px")),I&&g.length>0&&r(e)}return Object.assign(z,{data:function(e){return arguments.length?(g=e,z):g},style:function(e){return arguments.length?(h=e,z):h},chartId:function(e){return arguments.length?(b=e,z):b},layout:function(e){return arguments.length&&(w=e.width,I=e.side,L=e.align,P=e.legend,H=e.icon),z},addListener:function(e){return arguments.length&&(k[e.id]||(k[e.id]=[]),k[e.id].push(e.dispatch)),z},sendListeners:function(e,t,n){var r=k["".concat(t,"_").concat(e)];if(void 0===r?r=k[t]:k[t]&&(r=r.concat(k[t])),r&&0!==r.length)return r.forEach(function(r){a().has(r,"_.".concat(n))&&r.call(n,null,e,t)}),z},redraw:function(){D&&(D.select(".igc-legend-alignContainer").selectAll("*").remove(),D.call(z))}}),z}}}]);