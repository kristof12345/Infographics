(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[55],{7848:(t,e,r)=>{r.r(e),r.d(e,{PictorialSize:()=>k});var a=r(498);var n=r.n(a);var i=r(7713);var o=r(3906);var s=r(7738);var l=r(3862);var c=r(1114);var u=r(3807);var h=r(3912);var f=r(7845);var p=r(3903);var v=r(3900);var d=r(7724);var g=r(1113);var y=r(3909);var m=r(3851);var b=r(7844);var x=r(3861);var w=r(7849);function S(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function O(t,e,r){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(a){var n=Object.getOwnPropertyDescriptor(a,e);return n.get?n.get.call(r||t):n.value}})(t,e,r||t)}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,x.putGraph)("pictorial-size",w.PictorialSize);var k=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(a,t);var r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=E(a),r;if(e){var n=E(this).constructor;r=Reflect.construct(t,arguments,n)}else r=t.apply(this,arguments);var i;return(i=r)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function a(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}var u,x;return x=[{key:"getClassName",value:function(){return"PictorialSize"}}],u=[{key:"preRenderLabels",value:function(t,e){var r=n().get(this.runtime.sheet,"series[0].showValues",!0);var a={height:0,baseLineOffset:0};if(!r)return a;var i=n().get(this.options.style,"graph.item.value");var o=parseInt(i["font-size"],10);var s=(0,c.getTextDimensions)(t,i);var l=s.width<=e;for(;!l&&o>8;)i["font-size"]="".concat(--o,"px"),l=(s=(0,c.getTextDimensions)(t,i)).width<=e;return l?s:(this.runtime.showValues=!1,a)}},{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.root,r=this.options;var a=new d.Renderer({instance:this});var u=this.getSheetData();var g=(0,h.formatHelper)(u);var m=this.runtime={width:r.width,height:r.height,sheet:u,formatter:g};var x=r.fixedHeight,w=r.style;var S=b.PictorialGrid.prototype.prepareSheetData.call(this,u,this.sheetIndex);var O=S.data;m.showValues=n().get(u,"series[0].showValues",!0),(0,v.Controls)(this,{width:r.width}),(0,y.DownloadButton)(this,w.legend);var E=(0,p.legendHelper)({instance:this});if(!this.sheetsNotFound()){var R=m.height;if(R<1){this.stopRender();return}var k={top:10,right:10,bottom:10,left:10,pictorial:5};var P=this.createAnimationCounter(2);var I=m.width-k.left-k.right;var V=m.height-k.top-k.bottom;var z=O.length;var C=O.map(function(t){return t.valueLabel});var D=Math.floor(I/z);var T=this.preRenderLabels(C,D);var j=n().get(T,"baseLineOffset",0);var L=n().get(T,"height",0);var A=m.showValues;A||(k.pictorial=0),V-L<1&&(k.top=0,k.bottom=0,k.pictorial=0,V=m.height),L>V/2&&(L=0,k.pictorial=0,A=!1);var _=V-L-k.pictorial;var M=(0,s.default)().range([0,I]).domain((0,i.default)(0,z)).paddingOuter(0).paddingInner(.05).bandwidth();var q=u.categories.shapes;q.length||(q=this.defaults().shapes.map(function(t){return t.title}).slice(0));var B=(0,f.availableShapesMetrics)(r.shapes)(q);var G=(0,o.default)(O,function(t){return t.value});var H=0;var W=1/0;var N=0;var F=O.some(function(t){var e=B[t.shape];var r=Math.sqrt(t.value/G);var a=M/e.bbox.width*r;return _<e.bbox.height*a});O.forEach(function(t){var e=B[t.shape];var r=t.value?Math.sqrt(t.value/G):0;var a=F?_/e.bbox.height*r:M/e.bbox.width*r;H=Math.max(e.bbox.height*a,H);var n=a*e.bbox.width;t.shapeWidth=n,N+=n,t.scale=a,t.fillRule=e.fillRule,t.color=(0,c.getColor)(t.categoryIdx,u.categories.colors)});var U=(I-N)/z;var J;O.forEach(function(t,e){0===e?t.x=U/2:t.x=J.x+J.shapeWidth+U,t.xText=t.x+t.shapeWidth/2,J=t});var K=n().get(u,"series[0].align","middle");O.forEach(function(t){var e=0;var r=B[t.shape].bbox.height*t.scale;switch(K){case"middle":e+=(H-r)/2;break;case"bottom":e+=H-r}W=Math.min(W,e),t.y=e}),O.forEach(function(t){t.yText=W+H+k.pictorial+j});var Q={igc:{x:k.left,y:k.top+(x?(_-H)/2:0)}};x||(R=k.top+Math.min(_,H)+(L?k.pictorial+L:0)+k.bottom),this.containerSetup(),e.attr("width",m.width).attr("height",R);var X=e.select(".igc");a.add(function(){e.datum(t).transition().ease(l[r.animation.ease]).duration(r.animation.duration).on("start",function(){t.events.call("startAnimation")}).on("end",function(){P()}),X.attr("transform","translate(".concat(Q.igc.x,", ").concat(Q.igc.y,")"))}),a.addGraph([{graphs:[S],transitionDuration:r.animation.duration,legend:E,animationEnd:P,shapes:B,textStyle:n().get(w,"graph.item.value"),showValues:A}]),a.start()}}},{key:"graphInstanceSetup",value:function(t,e,r,a,n){var i=this.runtime.formatter;t.data(e.data).colors(e.colors).groupId(n).legend(a.legend).shapes(a.shapes).alpha(this.options.opacity).showValues(a.showValues).tooltip((0,g.createStyledTooltip)(this)).tooltipText(function(t){return t.category}).tooltipValue(function(t){return i.tooltip.x.format(t.valueLabel)}).textStyle(a.textStyle).transitionDuration(a.transitionDuration),t.dispatch().on("animationEnd",a.animationEnd)}},{key:"defaults",value:function(){var t={};return n().merge(t,O(E(a.prototype),"defaults",this).call(this),{shapes:[(0,m.defaultShape)()]}),n().unset(t,"style.graph.item.value.color"),t}},{key:"emptySheetData",value:function(){return n().merge({},O(E(a.prototype),"emptySheetData",this).call(this),{categories:{shapes:[(0,m.defaultShape)().title]},series:[{type:"pictorial-size",showValues:!0}],axis:[{}],grid:{}})}},{key:"applySheetOptions",value:function(t){t&&this.options.sheets.forEach(function(e,r){var a=t[r+1]||t[0];a.categories&&n().merge(e.categories,a.categories),e.series.forEach(function(t){n().merge(t,a.series&&a.series[0]||{})}),a.legend&&n().merge(e.legend,a.legend),e.axis.forEach(function(t,e){var r=a.axis&&a.axis[e];r&&n().merge(t,r)})})}}],S(a.prototype,u),x&&S(a,x),a}(u.Chart)},7849:(t,e,r)=>{r.r(e),r.d(e,{PictorialSize:()=>p});var a=r(498);var n=r.n(a);var i=r(420);var o=r(1117);var s=r(3863);var l=r(1113);var c=r(1115);var u=r(3905);var h=r(1114);var f=r(1998);function p(){var t=function(t){return n().uniq(t.reduce(function(t,e){return"string"==typeof e.shape&&t.push(e.shape),t},[]))};var e=function(t){var e=t.selectAll(".pict-graph");var r=[];return e.each(function(t){r.push(t)}),r};var r=function(r){r.each(function(){var r=(0,o.default)(this);if(r.selectAll(".pict-label").remove(),!g.length){r.selectAll(".pict-graph").remove();return}var i=t(e(r));var s=t(g);var l=n().size(s);var h=n().size(i)!==l||n().size(n().intersection(i,s))!==l;a(r),h&&r.selectAll(".pict-graph").remove();var v=r.selectAll(".pict-graph").data(g);var d=v.enter().append("path").attr("class","pict-graph");d.attr("transform",function(t){return"translate(".concat(t.x,", ").concat(t.y,") scale(").concat(t.scale,")")}).attr("fill-rule",function(t){return t.fillRule}).style("opacity",c.eps),v.exit().remove();var y=0;(v=d.merge(v)).transition().style("opacity",S).duration(x).attr("d",function(t){return V[t.shape].shape}).attr("transform",function(t){return"translate(".concat(t.x,", ").concat(t.y,") scale(").concat(t.scale,")")}).attr("fill",function(t){return(0,f.rgb)(t.color).toString()}).on("start",function(){y++}).on("end",function(){0==--y&&(p(v,r.selectAll(".pict-label")),(0,u.addMouseEvents)(v,O,k,E,R),z())})})};var a=function(t){var e=t.selectAll(".pict-label").data(P?g:[]);var r=e.enter().append("text").attr("class","pict-label").style("opacity",c.eps);e.exit().remove();var a=0;(e=r.merge(e)).attr("x",function(t){return t.xText}).attr("y",function(t){return t.yText}).attr("text-anchor","middle").style("cursor","default").style("opacity",S).styles(I).transition().duration(x).text(function(t){return t.valueLabel}).attr("fill",function(t){return I.color||t.color}).on("start",function(){a++}).on("end",function(){0==--a&&z()}),P||z()};var p=function(t,e){w&&w.data().forEach(function(t){w.addListener({id:"".concat(m,"_").concat(t.groupId),dispatch:O})}),O.on("highlightStart",function(r,a){m===a&&(t.filter(v(r)).transition().duration(150).ease(s.linear).style("opacity",.3*S),e.filter(d(r)).transition().duration(150).ease(s.linear).style("opacity",.3))}),O.on("highlightEnd",function(r,a){m===a&&(t.filter(v(r)).transition().duration(150).ease(s.linear).style("opacity",S).on("end",function(){(0,o.default)(this).style("opacity",S)}),e.filter(d(r)).transition().duration(150).ease(s.linear).style("opacity",null).on("end",function(){(0,o.default)(this).style("opacity",null)}))})};var v=function(t){return function(e){return t!==e.categoryIdx}};var d=function(t){return function(e){return t!==e.categoryIdx&&"none"!==(0,o.default)(this).style("display")}};var g=[];var y=h.schemeCategory10;var m;var b;var x=700;var w;var S=1;var O=(0,i.default)("highlightStart","highlightEnd","animationEnd","openUrl");var E=function(t){return t.xLabel};var R=function(t){return t.yLabel};var k=l.getTooltip;var P=!0;var I={};var V=[];var z=n().after(2,function(){O.call("animationEnd")});return Object.assign(r,{data:function(t){return arguments.length?(g=t,r):g},colors:function(t){return arguments.length?(y=t,r):y},groupId:function(t){return arguments.length?(b=t,r):b},chartId:function(t){return arguments.length?(m=t,r):m},legend:function(t){return arguments.length?(w=t,r):w},tooltip:function(t){return arguments.length?(k=t,r):k},tooltipText:function(t){return arguments.length?(E=t,r):E},tooltipValue:function(t){return arguments.length?(R=t,r):R},transitionDuration:function(t){return arguments.length?(x=t,r):x},dispatch:function(){return O},shapes:function(t){return arguments.length?(V=t,r):V},showValues:function(t){return arguments.length?(P=t,r):P},textStyle:function(t){return arguments.length?(I=t,r):I},alpha:function(t){return arguments.length?(S=t,r):S}}),r}},7847:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var a=r(498);var n=r.n(a);var i=r(7848);var o=r(7741);var s=r(7843);var l=r(7742);var c=Object.assign({},o.default);c.instanceClass=i.PictorialSize,c.defaultShape="circlePath",c.setupChartSheetOptionsItem=function(t,e){var r={categories:{colors:n().merge([],this.themeColors,t.colors||this.colors)},series:[{showValues:n().get(t,"showInLineValues",!0)}],axis:[{}]};return(0,l.default)(r,t,this.charts),s.assignShapesToCategories.call(this,{custom:t,sheetOptions:r,sheetIndex:e}),r};let u=Object.freeze(c)}}]);